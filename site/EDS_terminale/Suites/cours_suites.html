<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suites ‚Äî Cours, limites et r√©currence (EDS Terminale)</title>
  <meta name="description"
    content="Cours complet sur les suites (d√©finitions, arithm√©tique et g√©om√©trique, variations, bornes, limites, r√©currence)." />
  <link rel="stylesheet" href="/assets/css/site.css" />
  <style>
    :root {
      --bg: #0b1020;
      --bg2: #11162a;
      --card: #151b34;
      --text: #eef2ff;
      --muted: #a2b0d6;
      --primary: #6aa6ff;
      --accent: #22d3ee;
      --good: #0b3d23;
      --bad: #65121f;
      --border: #28314f;
      --shadow: 0 10px 30px rgba(0, 0, 0, .25)
    }

    .light {
      --bg: #f6f7fb;
      --bg2: #eef0f8;
      --card: #fff;
      --text: #0f172a;
      --muted: #4b5563;
      --primary: #3b82f6;
      --accent: #06b6d4;
      --good: #059669;
      --bad: #b91c1c;
      --border: #e5e7eb;
      --shadow: 0 10px 30px rgba(2, 6, 23, .06)
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 26px 18px 90px
    }

    header {
      position: sticky;
      top: 0;
      background: linear-gradient(180deg, var(--bg) 80%, #0000);
      backdrop-filter: saturate(1.2);
      z-index: 20;
      padding-bottom: 8px
    }

    .toolbar {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between
    }

    .buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap
    }

    .btn {
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 9px 14px;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: var(--shadow);
      display: inline-flex;
      align-items: center;
      gap: 8px
    }

    .btn:hover {
      filter: brightness(1.05)
    }

    .badge {
      display: inline-block;
      font-size: .8rem;
      color: white;
      background: linear-gradient(135deg, var(--accent), #7dd3fc);
      padding: 2px 10px;
      border-radius: 999px;
      margin-left: 6px
    }

    .muted {
      color: var(--muted)
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 18px;
      box-shadow: var(--shadow);
      margin-bottom: 18px
    }

    h1 {
      font-size: clamp(1.4rem, 2.2vw + .8rem, 2.4rem);
      margin: 8px 0
    }

    h2 {
      font-size: 1.45rem;
      margin: .2rem 0 .6rem
    }

    h3 {
      font-size: 1.1rem;
      margin: .2rem 0
    }

    .grid {
      display: grid;
      gap: 18px
    }

    .cols-2 {
      grid-template-columns: 1.05fr .95fr
    }

    @media (max-width:980px) {
      .cols-2 {
        grid-template-columns: 1fr
      }
    }

    .pill {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      background: var(--bg2);
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border)
    }

    .section {
      scroll-margin-top: 90px
    }

    details {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 12px;
      margin: .6rem 0
    }

    summary {
      cursor: pointer;
      font-weight: 600
    }

    .step {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      border-left: 3px solid #30406e;
      padding: 10px 12px;
      margin: 10px 0;
      background: linear-gradient(90deg, #0000, rgba(99, 102, 241, .08))
    }

    .step .n {
      flex: 0 0 26px;
      height: 26px;
      display: grid;
      place-items: center;
      border-radius: 8px;
      background: #334155;
      color: #fff;
      font-weight: 700
    }

    .result {
      background: var(--bg2);
      border: 1px dashed #3b4a77;
      border-radius: 10px;
      padding: 8px 10px;
      margin-top: 8px
    }

    .ok {
      background: var(--good);
      border-color: #0f5132;
      color: #fff
    }

    .err {
      background: var(--bad);
      border-color: #842029;
      color: #fff
    }

    .input {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 9px 10px;
      color: var(--text)
    }

    .input:focus {
      outline: 2px solid var(--primary)
    }

    .mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace
    }

    .hr {
      height: 1px;
      background: linear-gradient(90deg, #0000, #39508f, #0000);
      margin: 12px 0
    }

    nav.card ol {
      margin: 0 0 8px 18px
    }

    .sticky-footer {
      position: fixed;
      bottom: 16px;
      right: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px
    }

    .goodbox {
      background: rgba(16, 185, 129, .12);
      border: 1px solid rgba(16, 185, 129, .35)
    }

    .badbox {
      background: rgba(239, 68, 68, .12);
      border: 1px solid rgba(239, 68, 68, .35)
    }

    .print-only {
      display: none
    }

    /* Sommaire local en t√™te de section */
    .local-toc {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: .9rem;
      margin: -4px 0 10px
    }

    .local-toc a {
      color: var(--text);
      text-decoration: none;
      padding: 2px 6px;
      border-radius: 8px
    }

    .local-toc a[aria-current="page"] {
      background: var(--card);
      border: 1px solid var(--border)
    }

    .local-toc .sep {
      opacity: .6
    }

    @media print {

      .buttons,
      .sticky-footer,
      nav.card,
      .local-toc {
        display: none !important
      }

      .grid.cols-2 {
        grid-template-columns: 1fr !important
      }

      .print-only {
        display: block
      }

      /* Par d√©faut : tout le contenu des <details> est visible */
      details {
        display: block
      }

      details>summary {
        display: none
      }

      details>* {
        display: block
      }

      /* Modes d'export */
      body[data-print-mode="prof"] details>*:not(summary) {
        display: none !important
      }

      body[data-print-mode="prof"] details>summary {
        display: block !important
      }

      body[data-print-mode="eleve"] details.corrige {
        display: none !important
      }

      body[data-print-mode="eleve"] .result {
        display: none !important
      }
    }

    /* petites tables */
    .table-simple {
      width: 100%;
      border-collapse: collapse
    }

    .table-simple th,
    .table-simple td {
      border: 1px solid var(--border);
      padding: 6px 8px;
      text-align: left
    }

    .table-vert thead th {
      background: linear-gradient(180deg, var(--bg2), var(--card))
    }
  </style>
  <script>window.MathJax = { tex: { inlineMath: [["$", "$"], ["\\(", "\\)"]], displayMath: [["$$", "$$"], ["\\[", "\\]"]], macros: { N: "\\mathbb{N}", Z: "\\mathbb{Z}", Q: "\\mathbb{Q}", R: "\\mathbb{R}", pp: "\\mathbb{P}" } }, svg: { fontCache: 'global' } };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>

<body class="light">
  <div class="container">
    <a id="top"></a>
    <header>
      <div class="toolbar">
        <div>
          <h1>Suites ‚Äî Cours, limites et r√©currence <span class="badge">EDS Terminale</span></h1>
          <small class="muted">Auteur : <strong>Alaeddine Ben Rhouma</strong> ‚Äî Lyc√©e Pierre Mend√®s France, Tunis ‚Ä¢ ¬©
            2025</small>
          <p class="pill">Synth√®se bas√©e sur ¬´ Cours Les Suites ¬ª, ¬´ Cours_limites ¬ª, ¬´ Cours_RPR ¬ª</p>
        </div>
        <div class="buttons">
          <button class="btn" id="themeBtn">üåì Th√®me</button>
          <button class="btn" id="retypesetBtn">üîÑ LaTeX</button>
          <button class="btn" id="revealBtn" aria-pressed="false">üß© R√©v√©lations</button>
          <button class="btn" id="printBtn">üñ®Ô∏è Imprimer</button>
          <button class="btn" id="exportEleveBtn">üìÑ Export PDF ‚Äî √âl√®ve</button>
          <button class="btn" id="exportProfBtn">üìÑ Export PDF ‚Äî Prof</button>
          <span class="btn" id="scoreBox" aria-live="polite">üßÆ Score : 0/0</span>
          <button class="btn" id="resetBtn">‚ôªÔ∏è R√©initialiser</button>

        </div>
      </div>
    </header>

    <section class="print-only card">
      <h2>Sommaire (impression)</h2>
      <ol>
        <li>D√©finitions (arithm√©tique, g√©om√©trique, explicite vs r√©cursive)</li>
        <li>Principe de r√©currence (exemples, Bernoulli)</li>
        <li>Suites major√©es/minor√©es/born√©es</li>
        <li>Variations (crit√®res usuels, √©tude via une fonction)</li>
        <li>Limites (d√©finitions rigoureuses, comparaisons, op√©rations, arithm./g√©om.)</li>
        <li>Convergence des suites monotones</li>
        <li>Entra√Ænements</li>
        <li>Banque d‚Äôexercices (autocorrig√©s)</li>
      </ol>
    </section>

    <section class="grid cols-2">
      <nav class="card">
        <h2>Plan</h2>
        <div class="hr"></div>
        <ol>

          <li><a href="#defs">1. D√©finitions de suites</a></li>
          <li><a href="#rpr">2. Raisonnement par r√©currence</a></li>
          <li><a href="#bornes">3. Suites major√©es / minor√©es / born√©es</a></li>
          <li><a href="#variations">4. Variations d'une suite</a></li>
          <li><a href="#limites">5. Limites de suites</a></li>
          <li><a href="#monotones">6. Convergence des suites monotones</a></li>
          <li><a href="#entrainements">7. Entra√Ænements</a></li>
          <li><a href="#banque">8. Banque d‚Äôexercices (autocorrig√©s)</a></li>
        </ol>
        <p class="muted">Les preuves et corrections d√©taill√©es sont repli√©es ‚Äî d√©pliez au besoin.</p>
      </nav>

      <!-- D√âFINITIONS -->
      <div class="card section" id="defs">
        <h2>1. D√©finitions de suites</h2>
        <p><strong>D√©finition.</strong> Une <em>suite r√©elle</em> est une application $u: \N \to \R$, not√©e
          $(u_n)_{n\in\N}$, qui √† chaque entier $n$ associe un nombre r√©el $u_n$.</p>
        <details open>
          <summary><strong>Exemples fondamentaux</strong></summary>
          <div class="step">
            <div class="n">A</div>
            <div>
              <strong>Suite arithm√©tique.</strong> $u_{n+1}=u_n+r$ (raison $r$). Alors $u_n=u_0+nr$.<br />
              Somme partielle : $\displaystyle \sum_{k=0}^n u_k=\dfrac{n+1}{2}(u_0+u_n)$.
            </div>
          </div>
          <div class="step">
            <div class="n">B</div>
            <div>
              <strong>Suite g√©om√©trique.</strong> $u_{n+1}=q\,u_n$ (raison $q$). Alors $u_n=u_0\,q^n$.
            </div>
          </div>
          <div class="result goodbox"><strong>M√©thode.</strong> Pour reconna√Ætre la nature d'une suite d√©finie par
            r√©currence simple, mettre en √©vidence $u_{n+1}-u_n$ (arithm√©tique) ou $\dfrac{u_{n+1}}{u_n}$ (g√©om√©trique)
            lorsque $u_n>0$.</div>
        </details>
        <details>
          <summary><strong>Tableau r√©capitulatif</strong> ‚Äî arithm√©tique vs g√©om√©trique</summary>
          <table class="table-simple mt-8" style="width:100%">
            <thead>
              <tr>
                <th>Type</th>
                <th>D√©finition (r√©currence)</th>
                <th>Terme g√©n√©ral</th>
                <th>Somme $S_n=\sum_{k=0}^{n} u_k$</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Arithm√©tique</td>
                <td>$u_{n+1}=u_n+r$</td>
                <td>$u_n=u_0+nr$</td>
                <td>$\dfrac{n+1}{2}(u_0+u_n)$</td>
              </tr>
              <tr>
                <td>G√©om√©trique</td>
                <td>$u_{n+1}=q\,u_n$</td>
                <td>$u_n=u_0\,q^n$</td>
                <td>$\begin{cases}(n+1)u_0 & (q=1)\\[1mm] u_0\,\dfrac{1-q^{n+1}}{1-q} & (q\ne 1)\end{cases}$</td>
              </tr>
            </tbody>
          </table>
        </details>
        <details>
          <summary><strong>M√©thodes cl√©s</strong></summary>
          <div class="step">
            <div class="n">M1</div>
            <div><strong>Reconna√Ætre le type.</strong> Calculer $u_{n+1}-u_n$ (constante $\Rightarrow$ arithm√©tique) ou
              le rapport $\dfrac{u_{n+1}}{u_n}$ (constant $\Rightarrow$ g√©om√©trique, si $u_n\ne 0$).</div>
          </div>
          <div class="step">
            <div class="n">M2</div>
            <div><strong>Somme g√©om√©trique.</strong> Pour $q\ne 1$, $\displaystyle \sum_{k=0}^{n}
              q^k=\dfrac{1-q^{n+1}}{1-q}$ ; pour $q=1$, $n+1$.</div>
          </div>
          <div class="step">
            <div class="n">M3</div>
            <div><strong>R√©soudre $u_{n+1}=a\,u_n+b$.</strong> Si $a\ne 1$, la solution se met sous la forme
              $u_n=a^n(u_0-u^*)+u^*$ avec $u^*=\dfrac{b}{1-a}$. Si $a=1$, alors $u_n=u_0+nb$.</div>
          </div>
        </details>
      </div>
    </section>

    <!-- R√âCURRENCE -->
    <section class="card section" id="rpr">
      <h2>2. Principe de r√©currence</h2>
      <p><strong>Principe.</strong> Pour une propri√©t√© $P(n)$, si (i) $P(n_0)$ est vraie (initialisation) et (ii)
        $P(n)\Rightarrow P(n+1)$ pour tout $n\ge n_0$ (h√©r√©dit√©), alors $P(n)$ est vraie pour tout $n\ge n_0$.</p>
      <details open>
        <summary><strong>Exemple guid√© ‚Äî Polyn√©sie 2022</strong></summary>
        <div class="step">
          <div class="n">1</div>
          <div>Suite $u_0=1$, $\displaystyle u_{n+1}=\dfrac{u_n}{1+u_n}$. Conjecture : $u_n=\dfrac{1}{n+1}$.<br />Preuve
            : <em>Initialisation</em> $u_0=1=1/(0+1)$ ; <em>H√©r√©dit√©</em> si $u_n=\dfrac{1}{n+1}$, alors $\displaystyle
            u_{n+1}=\dfrac{\dfrac{1}{n+1}}{1+\dfrac{1}{n+1}}=\dfrac{1}{n+2}$.</div>
        </div>
      </details>
      <details>
        <summary><strong>In√©galit√© de Bernoulli</strong></summary>
        <div class="step">
          <div class="n">Th.</div>
          <div>Pour $a>0$ et tout $n\in\N$, $(1+a)^n\ge 1+na$ (preuve par r√©currence : multiplier par $(1+a)>0$ √†
            l'√©tape d'h√©r√©dit√©).</div>
        </div>
        <div class="result">Interpr√©tation : pour $x>0$, la courbe $y=(1+x)^n$ est au-dessus de sa tangente en $0$,
          $y=1+nx$.</div>
      </details>
      <details>
        <summary><strong>R√©currence et suites d√©finies par r√©currence</strong></summary>
        <div class="step">
          <div class="n">Ex</div>
          <div>Montrer que $u_{n+1}=\tfrac15 u_n+8$, $u_0=2$ v√©rifie $u_n\le 10$ pour tout $n$. (Initialisation au rang
            $0$ puis h√©r√©dit√©.)</div>

        </div>
      </details>
    </section>

    <!-- BORNES -->
    <section class="card section" id="bornes">
      <h2>3. Suites major√©es, minor√©es, born√©es</h2>
      <p><strong>D√©finitions.</strong> $(u_n)$ est major√©e s'il existe $M$ tel que $u_n\le M$ pour tout $n$ ; minor√©e
        s'il existe $m$ tel que $u_n\ge m$ ; born√©e si elle est √† la fois major√©e et minor√©e.</p>
      <details open>
        <summary><strong>Exemples rapides</strong></summary>
        <div class="step">
          <div class="n">A</div>
          <div>$u_n=\cos n$ est born√©e ($-1\le u_n\le 1$).</div>
        </div>
        <div class="step">
          <div class="n">B</div>
          <div>$v_n=n^2+1$ est minor√©e ($v_n\ge 1$) mais non major√©e.</div>
        </div>
      </details>
      <details open>
        <summary><strong>Exemple d√©taill√©</strong> ‚Äî $u_n=1+\dfrac{2}{n}$ ($n\ge 1$)</summary>
        <div class="step">
          <div class="n">1</div>
          <div>Pour $n\ge 1$, $0\le \dfrac{2}{n}\le 2$ donc $1\le u_n\le 3$ : $(u_n)$ est <em>born√©e</em>, minor√©e par
            $1$ et major√©e par $3$.</div>
        </div>
        <div class="result">Tout r√©el $M\ge 3$ est aussi un majorant de $(u_n)$ ; tout r√©el $m\le 1$ est un minorant.
        </div>
      </details>
      <details>
        <summary><strong>Bornes par r√©currence</strong></summary>
        <div class="step">
          <div class="n">Ex</div>
          <div>$u_{n+1}=\tfrac12 u_n+4$, $u_0=5$. Montrer par r√©currence : $3\le u_n\le 5$ puis en d√©duire la croissance
            avec $u_{n+1}-u_n=-\tfrac12 u_n+4\ge 0$.</div>
        </div>
      </details>
    </section>

    <!-- VARIATIONS -->
    <section class="card section" id="variations">
      <h2>4. Variations d'une suite</h2>
      <p><strong>D√©finition.</strong> $(u_n)$ est croissante √† partir de $n_0$ si $u_{n+1}\ge u_n$ pour tout $n\ge n_0$
        ; d√©croissante si $u_{n+1}\le u_n$.</p>
      <details open>
        <summary><strong>Crit√®res usuels</strong></summary>
        <div class="step">
          <div class="n">Pos</div>
          <div>Si $u_n>0$ √† partir d'un rang, alors $\dfrac{u_{n+1}}{u_n}\ge 1$ (resp. $\le 1$) entra√Æne la croissance
            (resp. d√©croissance).</div>
        </div>
        <div class="step">
          <div class="n">Diff</div>
          <div>√âtudier le signe de $u_{n+1}-u_n$ (ex. : $u_n=n^2-n$ $\Rightarrow$ $u_{n+1}-u_n=2n\ge0$).</div>
        </div>
      </details>
      <details>
        <summary><strong>Via l'√©tude d'une fonction</strong></summary>
        <div class="step">
          <div class="n">Id√©e</div>
          <div>Si $u_{n+1}=f(u_n)$ et si l'on conna√Æt les variations de $f$ sur un intervalle stabilis√© par la suite, on
            peut borner / comparer $u_{n+1}$ et $u_n$ (cf. exemples des documents).</div>
        </div>
      </details>
    </section>

    <!-- LIMITES -->
    <section class="card section" id="limites">
      <h2>5. Limites de suites</h2>
      <nav class="local-toc" aria-label="Sous-plan limites">
        <a href="#lim-defs">D√©finitions</a><span class="sep">‚Ä¢</span>
        <a href="#lim-comp">Comparaison & gendarmes</a><span class="sep">‚Ä¢</span>
        <a href="#lim-ops">Op√©rations</a><span class="sep">‚Ä¢</span>
        <a href="#lim-ag">Arithm./G√©om.</a>
      </nav>

      <a id="lim-defs"></a>
      <details open>
        <summary><strong>D√©finitions rigoureuses</strong> ‚Äî limite finie, infinie, divergence</summary>
        <div class="step">
          <div class="n">L‚àû</div>
          <div><strong>Limite $+\infty$.</strong> $(u_n)\to+\infty$ signifie : pour tout $A\in\R$, l'intervalle
            $]A,+\infty[$ contient tous les $u_n$ √† partir d'un certain rang. (D√©finition s√©quentielle.)</div>
        </div>
        <div class="step">
          <div class="n">L‚àí‚àû</div>
          <div><strong>Limite $-\infty$.</strong> $(u_n)\to-\infty$ signifie : pour tout $A\in\R$, $]-\infty,A[$
            contient tous les $u_n$ √† partir d'un certain rang.</div>
        </div>
        <div class="step">
          <div class="n">L</div>
          <div><strong>Limite finie $\ell\in\R$.</strong> Pour tout intervalle ouvert $I$ contenant $\ell$, on a $u_n\in
            I$ √† partir d'un certain rang. On dit que $(u_n)$ <em>converge</em> vers $\ell$.</div>
        </div>
        <div class="step">
          <div class="n">Ex1</div>
          <div><strong>Exemple.</strong> $u_n=n^2\to+\infty$ car, si $u_n\in]A,+\infty[$ $\Leftrightarrow$ $n^2>A$
            $\Leftrightarrow$ $n>\sqrt{A}$, il suffit de prendre $n\ge\lceil\sqrt{A}\rceil$.</div>
        </div>
        <div class="step">
          <div class="n">Ex2</div>
          <div><strong>Exemple.</strong> $u_n=\dfrac1n\to 0$ car pour tout intervalle $] -\alpha,\beta[$ contenant $0$
            (avec $\alpha,\beta>0$), $0<\dfrac1n<\beta$ d√®s que $n>\dfrac1\beta$.</div>
        </div>
        <div class="step">
          <div class="n">Ex3</div>
          <div><strong>Pas de limite.</strong> $u_n=(-1)^n$ n'a pas de limite : la suite oscille entre $-1$ et $1$.
          </div>
        </div>
        <div class="result badbox"><strong>Vocabulaire.</strong> Une suite <em>diverge</em> si elle n'a pas de limite
          finie (cas : pas de limite ou limite infinie).</div>
      </details>

      <a id="lim-comp"></a>
      <details>
        <summary><strong>Comparaison et encadrement</strong> ‚Äî th√©or√®mes cl√©s</summary>
        <div class="step">
          <div class="n">C1</div>
          <div><strong>Th√©or√®me de comparaison.</strong> Si $u_n\le v_n$ √† partir d'un certain rang et $u_n\to+\infty$,
            alors $v_n\to+\infty$. Si $u_n\le v_n$ et $v_n\to-\infty$, alors $u_n\to-\infty$.</div>
        </div>
        <div class="step">
          <div class="n">C2</div>
          <div><strong>Th√©or√®me des gendarmes.</strong> Si $v_n\le u_n\le w_n$ √† partir d'un rang et $v_n\to \ell$ et
            $w_n\to \ell$, alors $u_n\to \ell$.</div>
        </div>
      </details>

      <a id="lim-ops"></a>
      <details>
        <summary><strong>Op√©rations sur les limites</strong> ‚Äî cas usuels et F.I.</summary>
        <p>Dans tous les √©nonc√©s ci-dessous, les limites sont prises pour $n\to+\infty$.</p>
        <h3>Sommes</h3>
        <table class="table-simple">
          <thead>
            <tr>
              <th>$u_n$</th>
              <th>$v_n$</th>
              <th>$u_n+v_n$</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>$\ell\in\R$</td>
              <td>$\ell'\in\R$</td>
              <td>$\ell+\ell'$</td>
            </tr>
            <tr>
              <td>$+\infty$</td>
              <td>born√©e inf√©rieurement</td>
              <td>$+\infty$</td>
            </tr>
            <tr>
              <td>$-\infty$</td>
              <td>born√©e sup√©rieurement</td>
              <td>$-\infty$</td>
            </tr>
            <tr>
              <td>$+\infty$</td>
              <td>$-\infty$</td>
              <td><em>F.I.</em> ($\infty-\infty$)</td>
            </tr>
          </tbody>
        </table>
        <h3>Produits</h3>
        <table class="table-simple">
          <thead>
            <tr>
              <th>$u_n$</th>
              <th>$v_n$</th>
              <th>$u_nv_n$</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>$\ell\in\R$</td>
              <td>$\ell'\in\R$</td>
              <td>$\ell\ell'$</td>
            </tr>
            <tr>
              <td>$\ell\ne 0$</td>
              <td>$\pm\infty$</td>
              <td>$\pm\infty$ (signe par $\ell$)</td>
            </tr>
            <tr>
              <td>$0$</td>
              <td>$\pm\infty$</td>
              <td><em>F.I.</em> ($0\times\infty$)</td>
            </tr>
          </tbody>
        </table>
        <h3>Quotients</h3>
        <table class="table-simple">
          <thead>
            <tr>
              <th>$u_n$</th>
              <th>$v_n$</th>
              <th>$\dfrac{u_n}{v_n}$</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>$\ell\in\R$</td>
              <td>$\ell'\in\R\setminus\{0\}$</td>
              <td>$\dfrac{\ell}{\ell'}$</td>
            </tr>
            <tr>
              <td>$\pm\infty$</td>
              <td>$\ell'\ne 0$</td>
              <td>$\pm\infty$ (signe par $\ell'$)</td>
            </tr>
            <tr>
              <td>$\ell\ne 0$</td>
              <td>$0^+$ (resp. $0^-)$</td>
              <td>$+\infty$ (resp. $-\infty$)</td>
            </tr>
            <tr>
              <td>$\ell=0$</td>
              <td>$0$</td>
              <td><em>F.I.</em> ($0/0$)</td>
            </tr>
            <tr>
              <td>$\pm\infty$</td>
              <td>$\pm\infty$</td>
              <td><em>F.I.</em> ($\infty/\infty$)</td>
            </tr>
          </tbody>
        </table>
        <div class="step">
          <div class="n">Ex4</div>
          <div>
            <strong>Exemple.</strong> $u_n=n^2-5n+6$. Par somme : $n^2+(\!-5n)+6$ est une F.I. ($\infty-\infty$).
            Factorisons par le terme dominant :
            $$u_n=n^2\Big(1-\frac{5}{n}+\frac{6}{n^2}\Big).$$
            Or $n^2\to+\infty$ et $1-\dfrac{5}{n}+\dfrac{6}{n^2}\to 1$ ; ainsi $u_n\to +\infty$ (produit).<br />
            Variante : $u_n=(n-2)(n-3)\to +\infty$.
          </div>
        </div>
      </details>

      <a id="lim-ag"></a>
      <details>
        <summary><strong>Limites des suites arithm√©tiques et g√©om√©triques</strong></summary>
        <div class="step">
          <div class="n">Ar</div>
          <div><strong>Suite arithm√©tique</strong> $(u_n)$, $u_n=u_0+nr$, $r\ne 0$. Si $r>0$, alors $u_n\to+\infty$ ; si
            $r<0$, alors $u_n\to-\infty$.</div>
          </div>
          <div class="step">
            <div class="n">G√©om</div>
            <div><strong>Puissances</strong> $q^n$ avec $q\in\R\setminus\{0\}$ : si $-1&lt;q&lt;1$, alors $q^n\to 0$ ;
              si $q=1$, limite $1$ ; si $q&gt;1$, $q^n\to +\infty$ ; si $q\le -1$, la suite n'a pas de limite.</div>
          </div>
          <div class="result goodbox"><strong>Corollaire.</strong> Suite g√©om√©trique $(u_n)$, $u_n=u_0q^n$ avec $u_0\ne
            0$, $q\ne 0$ : m√™mes conclusions pour $(u_n)$ que pour $(q^n)$, avec le signe initial $u_0$.</div>
      </details>

      <details>
        <summary><strong>M√©mo rapide ‚Äî limites usuelles</strong></summary>
        <table class="table-simple table-vert mt-8" style="width:100%">
          <thead>
            <tr>
              <th>Suite $(u_n)$</th>
              <th>Condition</th>
              <th>Limite</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>$\dfrac{1}{n}$, $\dfrac{1}{n^p}$</td>
              <td>$p>0$</td>
              <td>$0$</td>
            </tr>
            <tr>
              <td>$n^p$, $\sqrt[n]{n}$</td>
              <td>$p>0$</td>
              <td>$+\infty$</td>
            </tr>
            <tr>
              <td>$q^n$</td>
              <td>$\lvert q\rvert&lt;1$</td>
              <td>$0$</td>
            </tr>
            <tr>
              <td>$q^n$</td>
              <td>$q&gt;1$</td>
              <td>$+\infty$</td>
            </tr>
            <tr>
              <td>$(-q)^n$</td>
              <td>$\lvert q\rvert&lt;1$</td>
              <td>oscille $\to 0$</td>
            </tr>
            <tr>
              <td>$\sqrt{n+a}-\sqrt{n}$</td>
              <td>$a$ r√©el fixe</td>
              <td>$0$ (par rationalisation)</td>
            </tr>
            <tr>
              <td>$\dfrac{an+b}{cn+d}$</td>
              <td>$c\ne 0$</td>
              <td>$\dfrac{a}{c}$</td>
            </tr>
          </tbody>
        </table>
      </details>

      <details>
        <summary><strong>Pi√®ges fr√©quents</strong> (formes ind√©termin√©es et erreurs classiques)</summary>
        <ul>
          <li><strong>Formes ind√©termin√©es</strong> : $\infty-\infty$, $0\times\infty$, $\dfrac{\infty}{\infty}$,
            $\dfrac{0}{0}$. ‚Äî Les lever par factorisation par le terme dominant, rationalisation
            ($\sqrt{n+a}-\sqrt{n}$), mise au m√™me d√©nominateur, etc.</li>
          <li><strong>Confusion ¬´ rang ¬ª vs ¬´ terme ¬ª</strong> : $n\to+\infty$ ne dit rien du signe de $u_n$. Ne
            concluez pas $\dfrac{u_{n+1}}{u_n}\ge1$ sans hypoth√®ses ; privil√©gier l'√©tude de $u_{n+1}-u_n$ ou l'analyse
            de $f$ si $u_{n+1}=f(u_n)$.</li>
          <li><strong>Puissances et signe</strong> : $q^n\to0$ seulement si $\lvert q\rvert&lt;1$ ; si $q&lt;-1$, $q^n$
            n'a pas de limite ; si $-1&lt;q&lt;0$, alternance mais $q^n\to0$.</li>
          <li><strong>In√©galit√©s et op√©rations</strong> : diviser par une quantit√© potentiellement n√©gative/qui tend
            vers 0 peut inverser le sens ou √™tre ill√©gitime. V√©rifier les signes/limites avant d'op√©rer.</li>
          <li><strong>Racines/carr√©s</strong> : √©lever au carr√© peut cr√©er des implications non √©quivalentes. Pr√©f√©rer
            rationaliser ou travailler sur des fonctions monotones.</li>
          <li><strong>Gendarmes mal pos√©s</strong> : pour appliquer le th√©or√®me des gendarmes, il faut <em>deux</em>
            suites encadrantes qui convergent vers <em>la m√™me</em> limite au m√™me rang.</li>
        </ul>
      </details>
    </section>

    <!-- MONOTONES -->
    <section class="card section" id="monotones">
      <h2>6. Convergence des suites monotones</h2>
      <details open>
        <summary><strong>Principes</strong></summary>
        <div class="step">
          <div class="n">Mtn</div>
          <div>Si $(u_n)$ est croissante et <em>major√©e</em>, alors $(u_n)$ converge ; si elle est croissante et <em>non
              major√©e</em>, alors $u_n\to +\infty$.</div>
        </div>
        <div class="step">
          <div class="n">Mtn</div>
          <div>Si $(u_n)$ est d√©croissante et <em>minor√©e</em>, alors $(u_n)$ converge ; si elle est d√©croissante et
            <em>non minor√©e</em>, alors $u_n\to -\infty$.
          </div>
        </div>
        <div class="step">
          <div class="n">Born√©‚ÜíConv</div>
          <div>Toute suite qui converge est born√©e (r√©ciproque fausse).</div>
        </div>
      </details>
      <details>
        <summary><strong>Exemples et contre‚Äëexemples</strong></summary>
        <div class="step">
          <div class="n">Ex6</div>
          <div>$u_n=-3+\dfrac{1}{5+n^3}\to -3$. On a $0<\dfrac{1}{5+n^3}\le \dfrac{1}{5}$ donc $-3\le u_n\le
              -3+\dfrac{1}{5}$ : la suite est born√©e ; comme $\big(\dfrac{1}{5+n^3}\big)$ d√©cro√Æt, $(u_n)$ d√©cro√Æt vers
              $-3$.</div>
          </div>
          <div class="step">
            <div class="n">CtrEx</div>
            <div>$v_n=1+(-1)^n$ est born√©e ($0\le v_n\le 2$) mais ne converge pas.</div>
          </div>
      </details>
    </section>

    <!-- ENTRA√éNEMENTS -->
    <section class="card section" id="entrainements">
      <h2>7. Entra√Ænements (s√©lection)</h2>
      <details open>
        <summary><strong>R√©currence</strong></summary>
        <ul>
          <li>Montrer $u_n=\dfrac{1}{n+1}$ pour $u_{n+1}=\dfrac{u_n}{1+u_n}$, $u_0=1$.</li>
          <li>Suite $u_{n+1}=\tfrac15 u_n+8$, $u_0=2$ : prouver $u_n\le 10$.</li>
          <li>Bernoulli : $(1+\alpha)^n\ge 1+n\alpha$ pour $\alpha>0$.</li>
        </ul>
      </details>
      <details>
        <summary><strong>Variations et bornes</strong></summary>
        <ul>
          <li>$u_{n+1}=\sqrt{2u_n-1}$, $u_0=5$ : montrer $u_n\ge 1$ et d√©croissance.</li>
          <li>$u_{n+1}=\dfrac{5u_n+4}{u_n+2}$, $u_0=1$ : montrer $0\le u_n\le u_{n+1}\le 4$.</li>
        </ul>
      </details>
      <details>
        <summary><strong>Limites</strong></summary>
        <ul>
          <li>$\displaystyle \lim_{n\to+\infty} (n^2-5n+1)$ ; $\lim \dfrac{5n^2+4}{4n^2+3n}$ ; $\lim (\sqrt{n+2}-\sqrt
            n)$.</li>
        </ul>
      </details>
      <details>
        <summary><strong>Arithm√©tique / G√©om√©trique ‚Äî exercices</strong></summary>
        <ul>
          <li><strong>Reconnaissance.</strong> D√©terminer la nature et le terme g√©n√©ral de $u_{n+1}=u_n+3$, $u_0=5$ ; de
            $v_{n+1}=2v_n$, $v_0=\tfrac12$.</li>
          <li><strong>Sommes.</strong> Calculer $\sum_{k=0}^{n} (2k+1)$ et $\sum_{k=0}^{n} 3\cdot 2^k$.</li>
          <li><strong>Lin√©aire 1er ordre.</strong> R√©soudre $w_{n+1}=\tfrac34 w_n+6$, $w_0=0$.</li>
        </ul>
      </details>
      <details>
        <summary><strong>Limites ‚Äî exercices</strong></summary>
        <ul>
          <li>√âtudier $\lim\limits_{n\to+\infty} \dfrac{5n^2+4}{4n^2+3n}$ ; $\lim (\sqrt{n+3}-\sqrt{n})$.</li>
          <li>Si $|q|<1$, montrer $\sum_{k=0}^{n} q^k$ converge et trouver sa limite quand $n\to+\infty$.</li>
        </ul>
      </details>
      <details>
        <summary><strong>Exercices guid√©s ‚Äî limites et convergence</strong></summary>
        <div class="step">
          <div class="n">G1</div>
          <div>
            <strong>Limite d'une suite rationnelle de suites</strong> ‚Äî $u_{n+1}=\dfrac{u_n+3}{u_n+1}$, $u_0>0$.
            <details>
              <summary>Correction</summary>
              <p><em>1) Monotonie / bornes (esquisse) :</em> on montre $u_n>0$ et que $(u_n)$ est croissante et major√©e
                (par 3 typiquement) en √©tudiant $u_{n+1}-u_n$ ou via une √©tude de $f(x)=\dfrac{x+3}{x+1}$ sur un
                intervalle stable.</p>
              <p><em>2) Limite candidate :</em> si $u_n\to \ell$, alors en passant √† la limite dans
                $u_{n+1}=\dfrac{u_n+3}{u_n+1}$, on obtient $\ell=\dfrac{\ell+3}{\ell+1}$, soit $\ell(\ell+1)=\ell+3$,
                donc $\ell^2-3=0$. Ainsi $\ell\in\{\sqrt{3},-\sqrt{3}\}$. Avec $u_n>0$, on retient $\ell=\sqrt{3}$.</p>
            </details>
          </div>
        </div>
        <div class="step">
          <div class="n">G2</div>
          <div>
            <strong>Limite par rationalisation</strong> ‚Äî $v_n=\sqrt{n+a}-\sqrt{n}$ avec $a$ r√©el fix√©.
            <details>
              <summary>Correction</summary>
              <p>Multiplier par le conjugu√© : $v_n=\dfrac{a}{\sqrt{n+a}+\sqrt{n}} \to 0$.</p>
            </details>
          </div>
        </div>
      </details>
    </section>

    <!-- BANQUE D‚ÄôEXERCICES AUTOCORRIG√âS -->
    <section class="card section" id="banque">
      <h2>8. Banque d‚Äôexercices (autocorrig√©s)</h2>
      <p class="muted">Saisissez votre r√©ponse puis laissez l‚Äôauto‚Äëcorrecteur valider (‚úîÔ∏è/‚ùå). Tol√©rance aux espaces et
        au signe √ó (x, * accept√©s). √âvitez les phrases : privil√©giez des expressions math√©matiques simples.</p>

      <details open>
        <summary><strong>Suites arithm√©tiques et g√©om√©triques</strong></summary>
        <div class="step">
          <div class="n">E1</div>
          <div>
            <em>Terme g√©n√©ral</em> ‚Äî $u_{n+1}=u_n+3$, $u_0=5$. Donner $u_n$ sous forme simplifi√©e.<br />
            <input id="ex1" class="input mono" placeholder="ex: 5+3n" oninput="checkText('ex1','5+3n')" />
            <div id="ex1r"></div>
          </div>
        </div>
        <div class="step">
          <div class="n">E2</div>
          <div>
            <em>Somme arithm√©tique</em> ‚Äî $S_n=\sum_{k=0}^n (2k+1)$. Donner une forme ferm√©e de $S_n$.
            <input id="ex2" class="input mono" placeholder="ex: (n+1)^2" oninput="checkText('ex2','(n+1)^2')" />
            <div id="ex2r"></div>
          </div>
        </div>
        <div class="step">
          <div class="n">E3</div>
          <div>
            <em>Somme g√©om√©trique</em> ‚Äî $S_n=\sum_{k=0}^n 3\cdot 2^k$. Donner $S_n$ sous forme ferm√©e.
            <input id="ex3" class="input mono" placeholder="ex: 3(2^{n+1}-1)"
              oninput="checkText('ex3','3(2^{n+1}-1)')" />
            <div id="ex3r"></div>
          </div>
        </div>
      </details>

      <details>
        <summary><strong>Limites</strong></summary>
        <div class="step">
          <div class="n">E4</div>
          <div>
            $\displaystyle \lim_{n\to+\infty} \frac{5n^2+4}{4n^2+3n} = \;$
            <input id="ex4" class="input mono" placeholder="ex: 5/4" oninput="checkText('ex4','5/4')" />
            <div id="ex4r"></div>
          </div>
        </div>
        <div class="step">
          <div class="n">E5</div>
          <div>
            $\displaystyle \lim_{n\to+\infty} (\sqrt{n+3}-\sqrt{n}) = \;$
            <input id="ex5" class="input mono" placeholder="ex: 0" oninput="checkText('ex5','0')" />
            <div id="ex5r"></div>
          </div>
        </div>
        <div class="step">
          <div class="n">E6</div>
          <div>
            $\displaystyle \lim_{n\to+\infty} q^n$ pour $\lvert q\rvert&lt;1$ :
            <input id="ex6" class="input mono" placeholder="ex: 0" oninput="checkText('ex6','0')" />
            <div id="ex6r"></div>
          </div>
        </div>
      </details>

      <details>
        <summary><strong>√âquations de r√©currence lin√©aires (1er ordre)</strong></summary>
        <div class="step">
          <div class="n">E7</div>
          <div>R√©soudre $w_{n+1}=\tfrac{3}{4}w_n+6$ avec $w_0=0$ : donner $w_n$.
            <input id="ex7" class="input mono" placeholder="ex: 24(1-(3/4)^n)"
              oninput="checkText('ex7','24(1-(3/4)^n)')" />
            <div id="ex7r"></div>
          </div>
        </div>
        <div class="step">
          <div class="n">E8</div>
          <div>Suite $u_{n+1}=\dfrac{u_n+3}{u_n+1}$, $u_0>0$. Limite $\ell=\;$
            <input id="ex8" class="input mono" placeholder="ex: sqrt(3)" oninput="checkText('ex8','sqrt(3)')" />
            <div id="ex8r"></div>
          </div>
        </div>
      </details>

      <details>
        <summary><strong>Bornes et variations</strong></summary>
        <div class="step">
          <div class="n">E9</div>
          <div>Pour $u_n=1+\dfrac{2}{n}$ ($n\ge 1$), donner un <em>minorant classique</em> $m$ et un <em>majorant
              classique</em> $M$.
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
              <span>$m=\;$</span><input id="ex9m" class="input mono" style="width:120px" placeholder="ex: 1"
                oninput="checkText('ex9m','1')" />
              <div id="ex9mr"></div>
              <span style="margin-left:8px">$M=\;$</span><input id="ex9M" class="input mono" style="width:120px"
                placeholder="ex: 3" oninput="checkText('ex9M','3')" />
              <div id="ex9Mr"></div>
            </div>
          </div>
        </div>
        <div class="step">
          <div class="n">E10</div>
          <div>Pour $u_n=n^2-n$, calculer $u_{n+1}-u_n = \;$
            <input id="ex10" class="input mono" placeholder="ex: 2n" oninput="checkText('ex10','2n')" />
            <div id="ex10r"></div>
          </div>
        </div>
      </details>

      <details open>
        <summary><strong>Exercices al√©atoires</strong></summary>
        <div id="randbox"></div>
      </details>

      <details>
        <summary><strong>Conseils d‚Äôutilisation</strong></summary>
        <ul>
          <li>√âcrivez les puissances avec l‚Äôexposant entre accolades si besoin : <code>2^{n+1}</code> (la saisie
            <code>2^n</code> est tol√©r√©e ici).
          </li>
          <li>Pour les racines, utilisez <code>sqrt(¬∑)</code> : ex. <code>sqrt(3)</code>.</li>
          <li>La validation tol√®re les espaces et accepte <code>x</code>, <code>*</code> pour la multiplication.</li>
        </ul>
      </details>
    </section>

    <footer class="muted">¬© 2025 ‚Äî Cours r√©dig√© par <strong>Alaeddine Ben Rhouma</strong>. Tous droits r√©serv√©s.
    </footer>
    <div class="sticky-footer"><button class="btn" onclick="scrollTo(0,0)">‚¨ÜÔ∏è Haut</button></div>
  </div>

  <script>const $ = (q) => document.querySelector(q), $$ = (q) => document.querySelectorAll(q);
    // Th√®me
    try {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) { document.body.classList.toggle('light', savedTheme === 'light'); }
      else if (window.matchMedia?.('(prefers-color-scheme: light)').matches) { document.body.classList.add('light'); }
    } catch (e) {}
    $('#themeBtn')?.addEventListener('click', () => {
      document.body.classList.toggle('light');
      try { localStorage.setItem('theme', document.body.classList.contains('light') ? 'light' : 'dark'); } catch (e) {}
      MathJax.typesetPromise?.();
    });
    // Outils
    $('#retypesetBtn')?.addEventListener('click', () => MathJax.typesetPromise?.());
    // Re-typeset when a <details> is toggled (to handle content revealed after load)
    document.querySelectorAll('details').forEach(d => {
      d.addEventListener('toggle', () => { try { MathJax.typesetPromise?.([d]); } catch (e) {} });
    });
    $('#printBtn')?.addEventListener('click', () => window.print());
    let revealed = false; try { revealed = localStorage.getItem('revealed_suites') === '1'; } catch (e) {}
    $('#revealBtn')?.setAttribute('aria-pressed', revealed);
    $('#revealBtn')?.addEventListener('click', () => {
      revealed = !revealed;
      document.querySelectorAll('details').forEach(d => d.open = revealed);
      $('#revealBtn')?.setAttribute('aria-pressed', revealed);
      try { localStorage.setItem('revealed_suites', revealed ? '1' : '0'); } catch (e) {}
    });
    // Petit utilitaire de correction de texte
    function escRe(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    window.checkText = function (id, expected) { const el = document.getElementById(id), out = document.getElementById(id + 'r'); if (!el) return; let ans = (el.value || '').trim(); let pattern = escRe(expected).replace(/\s\+/g, '\\s*').replace(/√ó/g, '[√óx*]').replace(/\s/g, '\\s*').replace(/>/g, '\\s*>\\s*'); const re = new RegExp('^' + pattern + '$', 'i'); const ok = re.test(ans); const box = document.createElement('span'); box.className = 'result ' + (ok ? 'ok' : 'err'); box.textContent = ok ? '‚úÖ Correct' : '‚ùå Attendu : ' + expected; if (out) { out.replaceChildren(box); } };
    // Sommaire local cliquable en haut des sections
    (function () {
      const items = [
        { id: 'defs', label: 'D√©finitions' },
        { id: 'rpr', label: 'R√©currence' },
        { id: 'bornes', label: 'Bornes' },
        { id: 'variations', label: 'Variations' },
        { id: 'limites', label: 'Limites' },
        { id: 'monotones', label: 'Monotones' },
        { id: 'entrainements', label: 'Entra√Ænements' },
        { id: 'banque', label: 'Autocorrig√©s' }
      ];
      // Tests (sanity check)
      try {
        console.assert(Array.isArray(items) && items.length === 8, 'items doit contenir 8 entr√©es');
        items.forEach(it => { if (!document.getElementById(it.id)) {/* Optionally handle missing anchor here */} });
      } catch (e) {}
      document.querySelectorAll('section.section, div.section').forEach(sec => {
        const nav = document.createElement('nav');
        nav.className = 'local-toc';
        const html = items.map(it => `<a href="#${it.id}" ${sec.id === it.id ? 'aria-current="page"' : ''}>${it.label}</a>`).join('<span class="sep">‚Ä¢</span>') + ' <span class="sep">‚Ä¢</span> <a href="#top" title="Haut">‚Üë Haut</a>';
        nav.innerHTML = html;
        sec.insertBefore(nav, sec.firstChild);
      });
    })();
  </script>
  <script>
    (function () {
      function updateScore() {
        const inputs = Array.from(document.querySelectorAll('.input'));
        const total = inputs.length;
        const correct = inputs.filter(i => i.dataset.correct === '1').length;
        const sb = document.getElementById('scoreBox');
        if (sb) sb.textContent = 'üßÆ Score : ' + correct + '/' + total;
      }
      document.addEventListener('input', function (e) {
        if (!e.target.classList || !e.target.classList.contains('input')) return;
        var el = e.target;
        var out = document.getElementById(el.id + 'r');
        var ok = out && out.textContent && out.textContent.trim().indexOf('‚úÖ') === 0;
        el.dataset.correct = ok ? '1' : '0';
        updateScore();
      });
      function randInt(a, b) { return Math.floor(Math.random() * (b - a + 1)) + a; }
      function choice(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
      function generateRandomExercises() {
        var box = document.getElementById('randbox');
        if (!box) return;
        var A = choice([1, 2, 3, 5]);
        var Q = choice([2, 3, 4]);
        var html1 = '<div class="step"><div class="n">E11</div><div>' +
          'Somme g√©om√©trique ‚Äî $S_n = \\sum_{k=0}^{n} ' + A + '\\cdot ' + Q + '^k$. Donner $S_n$ sous forme ferm√©e.<br/>' +
          '<input id="ex11" class="input mono" placeholder="ex: ' + A + '*(1-' + Q + '^(n+1))/(1-' + Q + ')" />' +
          '<div id="ex11r"></div>' +
          '</div></div>';
        var a = randInt(-5, 5); if (a === 0) a = 1;
        var c = choice([2, 3, 4, 5]); if (Math.abs(a) % c === 0) a += 1;
        var b = randInt(-5, 5), d = randInt(-5, 5);
        var html2 = '<div class="step"><div class="n">E12</div><div>' +
          'Limite ‚Äî $\\displaystyle \\lim_{n\\to +\\infty} \\frac{' + a + 'n+' + b + '}{' + c + 'n+' + d + '} = \;$' +
          '<input id="ex12" class="input mono" placeholder="ex: ' + a + '/' + c + '" />' +
          '<div id="ex12r"></div>' +
          '</div></div>';
        box.innerHTML = html1 + html2;
        try { MathJax.typesetPromise?.([box]); } catch (e) {}
        var ex11 = document.getElementById('ex11');
        if (ex11) {
          ex11.addEventListener('input', function () { window.checkText('ex11', A + '*(1-' + Q + '^(n+1))/(1-' + Q + ')'); });
        }
        var ex12 = document.getElementById('ex12');
        if (ex12) {
          ex12.addEventListener('input', function () {
            try { window.checkText('ex12', a + '/' + c); } catch (e) {}
          });
        }
      } // fin generateRandomExercises

      // Bouton R√©initialiser: efface, r√©g√©n√®re, remet le score
      var reset = document.getElementById('resetBtn');
      if (reset) {
        reset.addEventListener('click', function () {
          document.querySelectorAll('.input').forEach(function (inp) {
            inp.value = '';
            inp.dataset.correct = '0';
            var out = document.getElementById(inp.id + 'r');
            if (out) out.textContent = '';
          });
          try { generateRandomExercises(); } catch (e) {}
          updateScore();
        });
      }

      // Exposer et initialiser
      window.updateScore = updateScore;
      window.generateRandomExercises = generateRandomExercises;
      try { generateRandomExercises(); } catch (e) {}
      updateScore();
    })();
  </script>

  <!-- Export PDF ‚Äî modes √âl√®ve / Prof -->
  <script>
    (function () {
      // Marque automatiquement les <details> de corrections
      document.querySelectorAll('details').forEach(function (d) {
        const s = d.querySelector('summary');
        if (s && /correction/i.test((s.textContent || ''))) d.classList.add('corrige');
      });
      function doPrint(mode) {
        const body = document.body;
        const all = [...document.querySelectorAll('details')];
        const state = all.map(d => d.open);
        body.setAttribute('data-print-mode', mode);
        if (mode === 'prof') { all.forEach(d => d.open = false); }
        if (mode === 'eleve') { all.forEach(d => d.open = true); }
        setTimeout(() => {
          window.print();
          all.forEach((d, i) => d.open = state[i]);
          body.removeAttribute('data-print-mode');
        }, 20);
      }
      document.getElementById('exportEleveBtn')?.addEventListener('click', () => doPrint('eleve'));
      document.getElementById('exportProfBtn')?.addEventListener('click', () => doPrint('prof'));
    })();
  </script>

  <!-- Extension: Banque al√©atoire E13 (rationalisation) & E14 (terme dominant) -->
  <script>
    (function () {
      // Validation multi-formes
      window.checkSet = function (id, answers) {
        const el = document.getElementById(id), out = document.getElementById(id + 'r'); if (!el) return;
        const norm = s => String(s || '').toLowerCase().replace(/\s+/g, '');
        const ok = (answers || []).some(a => norm(el.value) === norm(a));
        const box = document.createElement('span'); box.className = 'result ' + (ok ? 'ok' : 'err');
        box.textContent = ok ? '‚úÖ Correct' : '‚ùå Ex. attendu : ' + ((answers && answers[0]) || '');
        if (out) out.replaceChildren(box);
        try { el.dispatchEvent(new Event('input', { bubbles: true })); } catch (e) {}
      };

      // On √©tend le g√©n√©rateur existant en ajoutant E13 & E14
      const oldGen = window.generateRandomExercises;
      window.generateRandomExercises = function () {
        if (typeof oldGen === 'function') oldGen();
        const box = document.getElementById('randbox'); if (!box) return;

        // E13 : Limite √† rationaliser sqrt(n+a) - sqrt(n)
        const a = 1 + Math.floor(Math.random() * 5);
        const html3 = `<div class="step"><div class="n">E13</div><div>
        Limite ‚Äî $\\displaystyle \\lim_{n\\to +\\infty} (\\sqrt{n + ${a}}-\\sqrt{n}) = \\\;$
        <input id="ex13" class="input mono" placeholder="ex: 0" />
        <div id="ex13r"></div>
      </div></div>`;

        // E14 : Terme dominant (polyn√¥me degr√© 2 ou 3)
        const deg = Math.random() < 0.5 ? 2 : 3;
        const A = (Math.random() < 0.5 ? -1 : 1) * (1 + Math.floor(Math.random() * 3));
        const b = (Math.floor(Math.random() * 11) - 5),
          c = (Math.floor(Math.random() * 11) - 5),
          d = (Math.floor(Math.random() * 11) - 5);
        const poly = deg === 2
          ? `${A}n^2 ${b >= 0 ? '+' : ''}${b}n ${c >= 0 ? '+' : ''}${c}`
          : `${A}n^3 ${b >= 0 ? '+' : ''}${b}n^2 ${c >= 0 ? '+' : ''}${c}n ${d >= 0 ? '+' : ''}${d}`;
        const sign = A > 0 ? '+‚àû' : '-‚àû';
        const html4 = `<div class="step"><div class="n">E14</div><div>
        Limite ‚Äî $\\displaystyle \\lim_{n\\to +\\infty} (${poly}) = \\\;$
        <input id="ex14" class="input mono" placeholder="ex: ${sign}" />
        <div id="ex14r"></div>
      </div></div>`;

        box.insertAdjacentHTML('beforeend', html3 + html4);
        try { MathJax.typesetPromise?.([box]); } catch (e) {}

        document.getElementById('ex13')?.addEventListener('input', () => checkSet('ex13', ["0"]));
        document.getElementById('ex14')?.addEventListener('input', () => checkSet('ex14', [sign, sign.replace('‚àû', 'inf'), sign.replace('‚àû', 'infty'), sign.replace('‚àû', 'infinity')]));
      };

      // R√©g√©n√©rer une fois avec l'extension en place
      try { window.generateRandomExercises(); } catch (e) {}
    })();
  </script>

  <!-- Auto-tests minimaux (ne g√™ne pas la prod, aide au debug) -->

  <!-- Fin du document -->
</body>


</html>
