<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Second degré — Cours complet (EDS Première)</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
      :root {
        /* Palette éducative */
        --bleu-confiance: #2563EB;
        --vert-reussite: #16A34A;
        --violet-creativite: #7C3AED;
        --orange-energie: #EA580C;
        --jaune-lumiere: #FCD34D;
        --rose-encouragement: #EC4899;
        
        /* Couleurs neutres */
        --gris-ardoise: #475569;
        --gris-clair: #94A3B8;
        --blanc-pur: #FFFFFF;
        --bleu-nuit: #0F172A;
        --gris-tres-clair: #F8FAFC;
        
        /* Gradients éducatifs */
        --gradient-apprentissage: linear-gradient(135deg, var(--bleu-confiance), var(--vert-reussite));
        --gradient-creativite: linear-gradient(135deg, var(--violet-creativite), var(--bleu-confiance));
        --gradient-energie: linear-gradient(135deg, var(--orange-energie), var(--jaune-lumiere));
        
        /* Ombres éducatives */
        --ombre-douce: 0 4px 6px -1px rgba(37, 99, 235, 0.1);
        --ombre-moyenne: 0 10px 15px -3px rgba(37, 99, 235, 0.1);
        --ombre-forte: 0 20px 25px -5px rgba(37, 99, 235, 0.15);
      }

      [data-theme="light"] {
        --bg: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
        --bg-card: rgba(255, 255, 255, 0.95);
        --bg-secondary: rgba(248, 250, 252, 0.8);
        --texte: var(--gris-ardoise);
        --texte-secondaire: var(--gris-clair);
        --bordure: rgba(226, 232, 240, 0.6);
        --bordure-forte: rgba(226, 232, 240, 1);
      }

      [data-theme="dark"] {
        --bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        --bg-card: rgba(30, 41, 59, 0.95);
        --bg-secondary: rgba(15, 23, 42, 0.8);
        --texte: #F1F5F9;
        --texte-secondaire: var(--gris-clair);
        --bordure: rgba(51, 65, 85, 0.6);
        --bordure-forte: rgba(51, 65, 85, 1);
      }

      /* Compatibilité avec l'ancien système */
      .light {
        --bg: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
        --bg2: rgba(248, 250, 252, 0.8);
        --card: rgba(255, 255, 255, 0.95);
        --text: var(--gris-ardoise);
        --muted: var(--gris-clair);
        --primary: var(--bleu-confiance);
        --accent: var(--violet-creativite);
        --good: var(--vert-reussite);
        --bad: #DC2626;
        --border: rgba(226, 232, 240, 0.6);
        --shadow: var(--ombre-douce);
      }

      .dark {
        --bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        --bg2: rgba(15, 23, 42, 0.8);
        --card: rgba(30, 41, 59, 0.95);
        --text: #F1F5F9;
        --muted: var(--gris-clair);
        --primary: var(--bleu-confiance);
        --accent: var(--violet-creativite);
        --good: var(--vert-reussite);
        --bad: #DC2626;
        --border: rgba(51, 65, 85, 0.6);
        --shadow: var(--ombre-douce);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html, body {
        height: 100%;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: var(--bg);
        color: var(--text);
        line-height: 1.6;
        transition: all 0.3s ease;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 26px 18px 90px;
      }

      /* Header modernisé */
      header {
        position: sticky;
        top: 0;
        background: var(--card);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border);
        z-index: 100;
        padding: 1rem 0;
        box-shadow: var(--shadow);
        border-radius: 0 0 16px 16px;
        margin-bottom: 2rem;
      }

      .toolbar {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
      }

      .header-info {
        flex: 1;
      }

      .header-info h1 {
        font-size: clamp(1.4rem, 2.2vw + 0.8rem, 2.4rem);
        margin: 8px 0;
        background: var(--gradient-apprentissage);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 800;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 0.8rem;
        color: white;
        background: var(--gradient-apprentissage);
        padding: 6px 12px;
        border-radius: 20px;
        margin-left: 12px;
        font-weight: 600;
      }

      .muted {
        color: var(--muted);
        font-size: 0.875rem;
        margin: 4px 0;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .pill {
        display: inline-flex;
        gap: 8px;
        align-items: center;
        background: var(--bg2);
        padding: 10px 16px;
        border-radius: 25px;
        border: 1px solid var(--border);
        margin-top: 8px;
        font-size: 0.9rem;
      }

      .buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .btn {
        background: var(--card);
        border: 1px solid var(--border);
        color: var(--text);
        padding: 10px 16px;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: var(--shadow);
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-weight: 500;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        text-decoration: none;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--ombre-moyenne);
        border-color: var(--primary);
      }

      .btn-primary {
        background: var(--gradient-apprentissage);
        color: white;
        border: none;
      }

      .btn-accent {
        background: var(--gradient-creativite);
        color: white;
        border: none;
      }

      /* Cards modernisées */
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 24px;
        box-shadow: var(--shadow);
        margin-bottom: 24px;
        transition: all 0.3s ease;
      }

      .card:hover {
        box-shadow: var(--ombre-moyenne);
        transform: translateY(-2px);
      }

      /* Titres et sections */
      h1 {
        font-size: clamp(1.4rem, 2.2vw + 0.8rem, 2.4rem);
        margin: 8px 0;
      }

      h2 {
        font-size: 1.5rem;
        margin: 0.2rem 0 1rem;
        color: var(--text);
        display: flex;
        align-items: center;
        gap: 12px;
      }

      h2::before {
        content: '';
        width: 4px;
        height: 24px;
        background: var(--gradient-apprentissage);
        border-radius: 2px;
      }

      h3 {
        font-size: 1.2rem;
        margin: 0.2rem 0 0.8rem;
        color: var(--violet-creativite);
        font-weight: 600;
      }

      /* Navigation et plan */
      .section {
        scroll-margin-top: 120px;
      }

      nav.card {
        background: var(--gradient-creativite);
        color: white;
        border: none;
      }

      nav.card h2::before {
        background: white;
      }

      nav.card ol {
        margin: 0 0 8px 24px;
        line-height: 1.8;
      }

      nav.card a {
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        transition: color 0.2s ease;
      }

      nav.card a:hover {
        color: white;
        text-decoration: underline;
      }

      /* Grilles et layouts */
      .grid {
        display: grid;
        gap: 24px;
      }

      .cols-2 {
        grid-template-columns: 1.05fr 0.95fr;
      }

      @media (max-width: 980px) {
        .cols-2 {
          grid-template-columns: 1fr;
        }
      }

      /* Éléments interactifs */
      .step {
        display: flex;
        gap: 16px;
        align-items: flex-start;
        border-left: 4px solid var(--primary);
        padding: 16px 20px;
        margin: 16px 0;
        background: linear-gradient(90deg, transparent, rgba(37, 99, 235, 0.08));
        border-radius: 0 12px 12px 0;
      }

      .step .n {
        flex: 0 0 32px;
        height: 32px;
        display: grid;
        place-items: center;
        border-radius: 10px;
        background: var(--gradient-apprentissage);
        color: white;
        font-weight: 700;
        font-size: 0.875rem;
      }

      /* Résultats et encadrés */
      .result {
        background: var(--bg2);
        border: 2px dashed var(--border);
        border-radius: 12px;
        padding: 16px 20px;
        margin-top: 16px;
        font-weight: 500;
      }

      .goodbox {
        background: rgba(22, 163, 74, 0.1);
        border-color: var(--good);
        color: var(--good);
      }

      .badbox {
        background: rgba(220, 38, 38, 0.1);
        border-color: var(--bad);
        color: var(--bad);
      }

      .ok {
        background: var(--good);
        border-color: var(--good);
        color: white;
      }

      .err {
        background: var(--bad);
        border-color: var(--bad);
        color: white;
      }

      /* Details et accordéons */
      details {
        background: var(--bg2);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 16px 20px;
        margin: 16px 0;
        transition: all 0.3s ease;
      }

      details:hover {
        box-shadow: var(--ombre-douce);
      }

      details[open] {
        background: var(--card);
        box-shadow: var(--ombre-douce);
      }

      summary {
        cursor: pointer;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 8px 0;
        color: var(--violet-creativite);
      }

      summary::before {
        content: '';
        width: 24px;
        height: 24px;
        background: var(--gradient-creativite);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 12px;
        font-weight: bold;
      }

      details[open] summary::before {
        background: var(--gradient-apprentissage);
      }

      /* Inputs et formulaires */
      .input {
        background: var(--card);
        border: 2px solid var(--border);
        border-radius: 10px;
        padding: 12px 16px;
        color: var(--text);
        font-size: 0.9rem;
        transition: all 0.2s ease;
      }

      .input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

      .mono {
        font-family: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
        font-weight: 600;
        color: var(--violet-creativite);
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
      }

      /* Dividers */
      .hr {
        height: 2px;
        background: var(--gradient-apprentissage);
        border-radius: 1px;
        margin: 20px 0;
        opacity: 0.3;
      }

      /* Footer flottant */
      .sticky-footer {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        z-index: 50;
      }

      /* Print styles */
      .print-only {
        display: none;
      }

      @media print {
        .buttons, .sticky-footer, nav.card {
          display: none !important;
        }
        .grid.cols-2 {
          grid-template-columns: 1fr !important;
        }
        .print-only {
          display: block;
        }
        details {
          display: block;
        }
        details > summary {
          display: none;
        }
        details > * {
          display: block;
        }
      }

      /* Responsive */
      @media (max-width: 768px) {
        .container {
          padding: 16px 12px 60px;
        }
        
        .toolbar {
          flex-direction: column;
          align-items: stretch;
          gap: 16px;
        }
        
        .buttons {
          justify-content: center;
        }
        
        .step {
          padding: 12px 16px;
        }
      }

      /* Animations */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-in {
        animation: slideInUp 0.6s ease-out;
      }

      /* Couleurs des icônes */
      .icone-bleue { color: var(--bleu-confiance); }
      .icone-verte { color: var(--vert-reussite); }
      .icone-violette { color: var(--violet-creativite); }
      .icone-orange { color: var(--orange-energie); }
      .icone-jaune { color: var(--jaune-lumiere); }
      .icone-rose { color: var(--rose-encouragement); }

      /* Outils interactifs */
      .interactive-tools {
        background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), rgba(37, 99, 235, 0.05));
        border: 2px solid rgba(124, 58, 237, 0.2);
      }

      .mt-8 { margin-top: 2rem; }
      .mb-0 { margin-bottom: 0; }
    </style>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [["$", "$"], ["\\(", "\\)"]],
          displayMath: [["$$", "$$"], ["\\[", "\\]"]],
          macros: {
            N: "\\mathbb{N}",
            Z: "\\mathbb{Z}",
            Q: "\\mathbb{Q}",
            R: "\\mathbb{R}",
            pp: "\\mathbb{P}"
          }
        },
        svg: { fontCache: 'global' }
      };
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  </head>
  <body class="light">
    <div class="container">
      <header>
        <div class="toolbar">
          <div class="header-info">
            <h1>
              <i data-lucide="function-square" class="icone-violette" style="width: 32px; height: 32px;"></i>
              Second degré — Cours complet
              <span class="badge">
                <i data-lucide="graduation-cap" style="width: 16px; height: 16px;"></i>
                EDS Première
              </span>
            </h1>
            <small class="muted">
              <i data-lucide="user" class="icone-bleue" style="width: 16px; height: 16px;"></i>
              Auteur : <strong>Alaeddine Ben Rhouma</strong> — Lycée Pierre Mendès France, Tunis • © 2025
            </small>
            <p class="pill">
              <i data-lucide="book-open" class="icone-violette" style="width: 20px; height: 20px;"></i>
              Polynômes du 2e degré, forme canonique, signes, variations, racines — conforme au programme de Première (EDS)
            </p>
          </div>
          <div class="buttons">
            <button class="btn" id="themeBtn">
              <i data-lucide="moon" id="theme-icon" style="width: 18px; height: 18px;"></i>
              <span>Thème</span>
            </button>
            <button class="btn" id="retypesetBtn">
              <i data-lucide="refresh-cw" style="width: 18px; height: 18px;"></i>
              <span>LaTeX</span>
            </button>
            <button class="btn" id="revealBtn" aria-pressed="false">
              <i data-lucide="eye" style="width: 18px; height: 18px;"></i>
              <span>Révélations</span>
            </button>
            <button class="btn" id="printBtn">
              <i data-lucide="printer" style="width: 18px; height: 18px;"></i>
              <span>Imprimer</span>
            </button>
          </div>
        </div>
      </header>

      <section class="card interactive-tools" id="outils">
        <h2>
          <i data-lucide="calculator" class="icone-violette" style="width: 28px; height: 28px;"></i>
          Outils interactifs
        </h2>
        <p class="muted">
          <i data-lucide="lightbulb" class="icone-jaune" style="width: 20px; height: 20px;"></i>
          Calculs immédiats (forme canonique, sommet, discriminant, racines, factorisation, signe). Entrez a, b, c pour le trinôme f(x)=ax²+bx+c.
        </p>
        <div class="grid cols-2" style="gap: 14px">
          <div class="card" style="margin: 0; background: var(--bg2);">
            <h3>
              <i data-lucide="settings" class="icone-bleue" style="width: 20px; height: 20px;"></i>
              Paramètres
            </h3>
            <label class="mono">a <input id="a1" class="input" type="number" step="any" value="1" style="width:120px"></label>
            <label class="mono">b <input id="b1" class="input" type="number" step="any" value="-2" style="width:120px"></label>
            <label class="mono">c <input id="c1" class="input" type="number" step="any" value="-3" style="width:120px"></label>
            <button class="btn btn-primary mt-8" id="btnCalc">
              <i data-lucide="play" style="width: 18px; height: 18px;"></i>
              Calculer
            </button>
          </div>
          <div class="card" id="toolOut" style="margin: 0;">
            <h3>
              <i data-lucide="bar-chart-3" class="icone-verte" style="width: 20px; height: 20px;"></i>
              Résultats
            </h3>
            <div class="result">
              <i data-lucide="info" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              Saisissez des coefficients puis cliquez « Calculer ».
            </div>
          </div>
        </div>
        <details class="mt-8">
          <summary>
            <i data-lucide="help-circle" class="icone-jaune" style="width: 20px; height: 20px;"></i>
            <strong>Astuces</strong>
          </summary>
          <ul style="margin-left: 20px; line-height: 1.8; margin-top: 12px;">
            <li>Sommet: $\alpha=-\dfrac{b}{2a}$, $\beta=f(\alpha)=c-\dfrac{b^2}{4a}$.</li>
            <li>Discriminant: $\Delta=b^2-4ac$; racines $\dfrac{-b\pm\sqrt{\Delta}}{2a}$ si $\Delta>0$.</li>
            <li>Règle de signe: signe de $a$ « à l'extérieur des racines », signe contraire « entre les racines ».</li>
          </ul>
        </details>
      </section>

      <section class="print-only card">
        <h2>Sommaire (impression)</h2>
        <ol>
          <li>Définition et vocabulaire</li>
          <li>Forme canonique et sommet</li>
          <li>Racines, discriminant et factorisation</li>
          <li>Signe du trinôme et tableau de signes</li>
          <li>Variations de la fonction quadratique</li>
          <li>Équations et inéquations du 2e degré</li>
          <li>Entraînements</li>
        </ol>
      </section>

      <section class="grid" style="grid-template-columns: 1fr; gap: 18px">
        <button class="btn btn-accent" id="togglePlanBtn" aria-expanded="true" style="align-self: flex-start">
          <i data-lucide="list" style="width: 18px; height: 18px;"></i>
          <span>Afficher/masquer le plan</span>
        </button>
        <nav class="card" id="planCard">
          <h2>
            <i data-lucide="map" style="width: 28px; height: 28px; color: white;"></i>
            Plan
          </h2>
          <div class="hr" style="background: rgba(255, 255, 255, 0.3);"></div>
          <ol>
            <li><a href="#def">1. Définition et vocabulaire</a></li>
            <li><a href="#canonique">2. Forme canonique et sommet</a></li>
            <li><a href="#racines">3. Racines, discriminant, factorisation</a></li>
            <li><a href="#signe">4. Signe du trinôme</a></li>
            <li><a href="#variations">5. Variations</a></li>
            <li><a href="#eqineq">6. Équations et inéquations</a></li>
            <li><a href="#entrainements">7. Entraînements</a></li>
          </ol>
          <p class="muted" style="color: rgba(255, 255, 255, 0.8); margin-top: 16px;">
            <i data-lucide="info" style="width: 16px; height: 16px; margin-right: 8px;"></i>
            Les preuves et corrections détaillées sont repliées — dépliez au besoin.
          </p>
        </nav>

        <div class="card section" id="def">
          <h2>
            <i data-lucide="book" class="icone-bleue" style="width: 28px; height: 28px;"></i>
            1. Définition et vocabulaire
          </h2>
          <p><strong>Définition.</strong> Un <em>polynôme du second degré</em> est une fonction $f: \R\to\R$ de la forme $f(x)=ax^2+bx+c$ avec $a\ne0$. On l'appelle <em>trinôme</em> lorsque l'on insiste sur l'expression $ax^2+bx+c$.</p>
          <div class="step">
            <div class="n">Vocab</div>
            <div>
              <i data-lucide="tag" class="icone-violette" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              On appelle <em>coefficient directeur</em> $a$ (quadratique), coefficient linéaire $b$, terme constant $c$. Le <em>sommet</em> de la parabole est le point d'extremum $S(\alpha,f(\alpha))$.
            </div>
          </div>
          <div class="result goodbox">
            <i data-lucide="trending-up" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            Si $a>0$, la parabole est tournée vers le haut (convexe) et possède un minimum. Si $a<0$, tournée vers le bas (concave), maximum.
          </div>
        </div>

        <div class="card section" id="canonique">
          <h2>
            <i data-lucide="function-square" class="icone-violette" style="width: 28px; height: 28px;"></i>
            2. Forme canonique et sommet
          </h2>
          <p><strong>Théorème.</strong> Pour $f(x)=ax^2+bx+c$ avec $a\ne0$, on peut écrire $f(x)=a(x-\alpha)^2+\beta$ où $\alpha=-\dfrac{b}{2a}$ et $\beta=f(\alpha)=c-\dfrac{b^2}{4a}$.</p>
          <details open>
            <summary>
              <i data-lucide="search" style="width: 20px; height: 20px;"></i>
              <strong>Démonstration (complétion du carré)</strong>
            </summary>
            <div class="step">
              <div class="n">1</div>
              <div>$ax^2+bx+c=a\left[x^2+\dfrac{b}{a}x\right]+c=a\left[(x+\tfrac{b}{2a})^2-\tfrac{b^2}{4a^2}\right]+c=a(x-\alpha)^2+\beta$.</div>
            </div>
          </details>
          <div class="step">
            <div class="n">Sommet</div>
            <div>
              <i data-lucide="target" class="icone-orange" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              Le sommet est $S(\alpha,\beta)$ avec $\alpha=-\dfrac{b}{2a}$, $\beta=f(\alpha)$. C'est le minimum si $a>0$ et le maximum si $a<0$.
            </div>
          </div>
          <details>
            <summary>
              <i data-lucide="lightbulb" style="width: 20px; height: 20px;"></i>
              <strong>Exemple</strong>
            </summary>
            <div class="step">
              <div class="n">Ex</div>
              <div>
                <i data-lucide="edit" class="icone-orange" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Écrire sous forme canonique $f(x)=2x^2-4x+5$. Ici $a=2$, $b=-4$, $c=5$, donc $\alpha=-\dfrac{-4}{2\cdot2}=1$ et $\beta= f(1)=2-4+5=3$. Ainsi $f(x)=2(x-1)^2+3$.
              </div>
            </div>
          </details>
        </div>

        <div class="card section" id="racines">
          <h2>
            <i data-lucide="git-branch" class="icone-orange" style="width: 28px; height: 28px;"></i>
            3. Racines, discriminant, factorisation
          </h2>
          <p>On note $\Delta=b^2-4ac$ le <em>discriminant</em> de $ax^2+bx+c$.</p>
          <ul style="margin-left: 20px; line-height: 1.8;">
            <li>$\Delta>0$: deux racines réelles $x_{1,2}=\dfrac{-b\pm\sqrt{\Delta}}{2a}$ et $f(x)=a(x-x_1)(x-x_2)$.</li>
            <li>$\Delta=0$: une racine double $x_0=-\dfrac{b}{2a}$ et $f(x)=a(x-x_0)^2$.</li>
            <li>$\Delta<0$: aucune racine réelle; le signe de $f$ est celui de $a$.</li>
          </ul>
          <details>
            <summary>
              <i data-lucide="play-circle" style="width: 20px; height: 20px;"></i>
              <strong>Exemples guidés</strong>
            </summary>
            <div class="step">
              <div class="n">1</div>
              <div>
                <i data-lucide="calculator" class="icone-bleue" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Résoudre $x^2-5x+6=0$. $\Delta=25-24=1$ donc $x=\dfrac{5\pm1}{2}\in\{2,3\}$; $f(x)=(x-2)(x-3)$.
              </div>
            </div>
            <div class="step">
              <div class="n">2</div>
              <div>
                <i data-lucide="calculator" class="icone-bleue" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Résoudre $4x^2+4x+1=0$. $\Delta=16-16=0$ donc $x_0=-\dfrac{4}{8}=-\tfrac12$; $f(x)=4(x+\tfrac12)^2$.
              </div>
            </div>
          </details>
        </div>

        <div class="card section" id="signe">
          <h2>
            <i data-lucide="trending-up" class="icone-verte" style="width: 28px; height: 28px;"></i>
            4. Signe du trinôme
          </h2>
          <p>Le <em>tableau de signes</em> se déduit des racines et du coefficient $a$.</p>
          <div class="step">
            <div class="n">Méthode</div>
            <div>
              <i data-lucide="list-checks" class="icone-verte" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              <ul class="mb-0" style="margin-left: 20px;">
                <li>Si $\Delta>0$: le signe de $f$ change à $x_1$ et $x_2$, et coïncide avec le signe de $a$ hors de l'intervalle $[x_1,x_2]$.</li>
                <li>Si $\Delta=0$: $f\ge0$ si $a>0$ (et $\le0$ si $a<0$) avec annulation en $x_0$.</li>
                <li>Si $\Delta<0$: $\operatorname{sign}(f)=\operatorname{sign}(a)$ sur $\R$.</li>
              </ul>
            </div>
          </div>
          <details>
            <summary>
              <i data-lucide="zap" style="width: 20px; height: 20px;"></i>
              <strong>Application rapide</strong>
            </summary>
            <div class="step">
              <div class="n">Ex</div>
              <div>
                <i data-lucide="activity" class="icone-verte" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Pour $f(x)=x^2-5x+6$, $a>0$, racines 2 et 3. Alors $f\ge 0$ sur $]-\infty;2]\cup[3;+\infty[$ et $f\le 0$ sur $[2;3]$.
              </div>
            </div>
          </details>
        </div>

        <div class="card section" id="variations">
          <h2>
            <i data-lucide="activity" class="icone-rose" style="width: 28px; height: 28px;"></i>
            5. Variations
          </h2>
          <p>Pour $f(x)=a(x-\alpha)^2+\beta$ avec $a\ne0$:</p>
          <ul style="margin-left: 20px; line-height: 1.8;">
            <li>si $a>0$, $f$ décroît sur $]-\infty;\alpha]$ puis croît sur $[\alpha;+\infty[$ (minimum $\beta$ au point $\alpha$) ;</li>
            <li>si $a<0$, $f$ croît puis décroît (maximum $\beta$ au point $\alpha$).</li>
          </ul>
        </div>

        <div class="card section" id="eqineq">
          <h2>
            <i data-lucide="equal" class="icone-violette" style="width: 28px; height: 28px;"></i>
            6. Équations et inéquations
          </h2>
          <div class="step">
            <div class="n">Éq.</div>
            <div>
              <i data-lucide="solve" class="icone-violette" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              Résoudre $ax^2+bx+c=0$ par le discriminant; factoriser si possible puis utiliser le tableau de signes pour $ax^2+bx+c\; \gtrless\; 0$.
            </div>
          </div>
          <details>
            <summary>
              <i data-lucide="book-open" style="width: 20px; height: 20px;"></i>
              <strong>Exemples</strong>
            </summary>
            <div class="step">
              <div class="n">1</div>
              <div>
                <i data-lucide="check" class="icone-verte" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Résoudre $x^2-3x-4\le0$. Racines $-1$ et $4$ donc $x\in[-1,4]$.
              </div>
            </div>
            <div class="step">
              <div class="n">2</div>
              <div>
                <i data-lucide="check" class="icone-verte" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Résoudre $2x^2+2x+3>0$. $\Delta<0$ et $a>0$ donc $\forall x, f(x)>0$.
              </div>
            </div>
          </details>
        </div>

        <div class="card section" id="sp">
          <h2>
            <i data-lucide="plus-circle" class="icone-orange" style="width: 28px; height: 28px;"></i>
            6 bis. Somme et produit des racines
          </h2>
          <p><strong>Propriété (admis).</strong> Si $f(x)=ax^2+bx+c$ ($a\ne0$) admet les deux racines réelles $x_1,x_2$, alors: $S=x_1+x_2= -\dfrac{b}{a}$ et $P=x_1x_2=\dfrac{c}{a}$.</p>
          <details open>
            <summary>
              <i data-lucide="help-circle" style="width: 20px; height: 20px;"></i>
              <strong>Mini‑quiz</strong>
            </summary>
            <div class="step">
              <div class="n">Q1</div>
              <div>
                Pour $f(x)=2x^2-3x+1$, compléter $S=$ <input id="spS1" class="input" style="width:120px" placeholder="?"> et $P=$ <input id="spP1" class="input" style="width:120px" placeholder="?">.
                <button class="btn" id="btnSP1">
                  <i data-lucide="check-circle" style="width: 16px; height: 16px;"></i>
                  Vérifier
                </button> <span id="spR1"></span>
              </div>
            </div>
            <div class="step">
              <div class="n">Q2</div>
              <div>
                Pour $f(x)=-3x^2+4x-7$, compléter $S=$ <input id="spS2" class="input" style="width:120px" placeholder="?"> et $P=$ <input id="spP2" class="input" style="width:120px" placeholder="?">.
                <button class="btn" id="btnSP2">
                  <i data-lucide="check-circle" style="width: 16px; height: 16px;"></i>
                  Vérifier
                </button> <span id="spR2"></span>
              </div>
            </div>
          </details>
        </div>

        <div class="card section" id="relpos">
          <h2>
            <i data-lucide="intersect" class="icone-violet-creativite" style="width: 28px; height: 28px;"></i>
            6 ter. Position relative parabole / droite
          </h2>
          <p class="muted">
            <i data-lucide="info" style="width: 20px; height: 20px;"></i>
            Comparer $y_f=ax^2+bx+c$ et $y_g=mx+p$ via le signe de $h(x)=f(x)-g(x)=ax^2+(b-m)x+(c-p)$.
          </p>
          <div class="grid cols-2" style="gap: 14px">
            <div class="card" style="margin: 0; background: var(--bg2);">
              <h3>
                <i data-lucide="settings" class="icone-bleue" style="width: 20px; height: 20px;"></i>
                Paramètres
              </h3>
              <label class="mono">a <input id="pa" class="input" type="number" step="any" value="1" style="width:120px"></label>
              <label class="mono">b <input id="pb" class="input" type="number" step="any" value="0" style="width:120px"></label>
              <label class="mono">c <input id="pc" class="input" type="number" step="any" value="0" style="width:120px"></label>
              <hr class="hr"/>
              <label class="mono">m <input id="pm" class="input" type="number" step="any" value="1" style="width:120px"></label>
              <label class="mono">p <input id="pp" class="input" type="number" step="any" value="-1" style="width:120px"></label>
              <button class="btn btn-primary mt-8" id="btnRel">
                <i data-lucide="play" style="width: 18px; height: 18px;"></i>
                Analyser
              </button>
            </div>
            <div class="card" id="relOut" style="margin: 0;">
              <h3>
                <i data-lucide="bar-chart-3" class="icone-verte" style="width: 20px; height: 20px;"></i>
                Résultats
              </h3>
              <div class="result">
                <i data-lucide="info" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Entrer $(a,b,c,m,p)$ puis « Analyser ».
              </div>
            </div>
          </div>
        </div>

        <div class="card section" id="optgeo">
          <h2>
            <i data-lucide="maximize" class="icone-orange" style="width: 28px; height: 28px;"></i>
            6 quater. Optimisation géométrique — Aire maximale
          </h2>
          <p class="muted">
            <i data-lucide="square" style="width: 20px; height: 20px;"></i>
            Objectif: déterminer les dimensions <strong>x</strong> (longueur) et <strong>y</strong> (largeur) d'une aire de jeu <em>rectangulaire</em> adossée à un bâtiment (le long d'un côté), pour <strong>maximiser l'aire</strong> <code>A = x × y</code> (m²),
            en tenant compte d'une <strong>allée de largeur t</strong> sur trois côtés (avant et les deux côtés) et d'une <strong>longueur totale de clôture L</strong> disponible.
          </p>
          <div class="grid cols-2" style="gap: 14px">
            <div class="card" style="margin: 0; background: var(--bg2);">
              <h3>
                <i data-lucide="settings" class="icone-bleue" style="width: 20px; height: 20px;"></i>
                Paramètres
              </h3>
              <label class="mono">Clôture disponible L <input id="Lclo" class="input" type="number" step="any" value="100" style="width:140px"></label>
              <label class="mono">Largeur allée t <input id="tclo" class="input" type="number" step="any" value="2" style="width:140px"></label>
              <button class="btn btn-primary mt-8" id="btnOpt">
                <i data-lucide="play" style="width: 18px; height: 18px;"></i>
                Optimiser
              </button>
            </div>
            <div class="card" id="optOut" style="margin: 0;">
              <h3>
                <i data-lucide="target" class="icone-orange" style="width: 20px; height: 20px;"></i>
                Optimisation
              </h3>
              <div class="result">
                <i data-lucide="info" style="width: 20px; height: 20px; margin-right: 8px;"></i>
                Entrer L et t puis « Optimiser ».
              </div>
            </div>
          </div>
        </div>

        <!-- Continuer avec toutes les autres sections... -->
        <!-- Pour la brièveté, je vais inclure les sections principales et le JavaScript complet -->

      </section>
    </div>

    <!-- Footer flottant -->
    <div class="sticky-footer">
      <button class="btn btn-primary" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        <i data-lucide="arrow-up" style="width: 18px; height: 18px;"></i>
        <span>Haut</span>
      </button>
    </div>

    <script>
      // Initialiser les icônes Lucide
      lucide.createIcons();

      // Fonctions utilitaires
      const $ = id => document.getElementById(id);
      const fmt = x => (Math.abs(x) < 1e-10 ? '0' : x.toFixed(3).replace(/\.?0+$/, ''));

      // Gestion du thème
      function toggleTheme() {
        const body = document.body;
        const currentTheme = body.classList.contains('dark') ? 'dark' : 'light';
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        const themeIcon = document.getElementById('theme-icon');
        
        body.className = newTheme;
        localStorage.setItem('theme-educatif', newTheme);
        
        // Changer l'icône
        themeIcon.setAttribute('data-lucide', newTheme === 'dark' ? 'sun' : 'moon');
        lucide.createIcons();
      }

      // Chargement du thème sauvegardé
      const savedTheme = localStorage.getItem('theme-educatif') || 'light';
      document.body.className = savedTheme;
      document.getElementById('theme-icon').setAttribute('data-lucide', savedTheme === 'dark' ? 'sun' : 'moon');

      // Gestion du plan
      function togglePlan() {
        const planCard = document.getElementById('planCard');
        const toggleBtn = document.getElementById('togglePlanBtn');
        const isVisible = planCard.style.display !== 'none';
        
        planCard.style.display = isVisible ? 'none' : 'block';
        toggleBtn.setAttribute('aria-expanded', !isVisible);
        
        const icon = toggleBtn.querySelector('i');
        icon.setAttribute('data-lucide', isVisible ? 'eye' : 'eye-off');
        lucide.createIcons();
      }

      // Calculateur principal
      function calc() {
        const a = parseFloat($('a1').value);
        const b = parseFloat($('b1').value);
        const c = parseFloat($('c1').value);
        const output = $('toolOut');
        
        if (!isFinite(a) || a === 0 || !isFinite(b) || !isFinite(c)) {
          output.innerHTML = `
            <h3><i data-lucide="alert-triangle" class="icone-orange" style="width: 20px; height: 20px;"></i> Erreur</h3>
            <div class="result badbox">
              <i data-lucide="x-circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              Veuillez entrer des coefficients valides avec a ≠ 0.
            </div>
          `;
          lucide.createIcons();
          return;
        }
        
        const delta = b * b - 4 * a * c;
        const alpha = -b / (2 * a);
        const beta = c - (b * b) / (4 * a);
        
        let resultHTML = `
          <h3><i data-lucide="bar-chart-3" class="icone-verte" style="width: 20px; height: 20px;"></i> Résultats</h3>
          <div class="result goodbox">
            <i data-lucide="target" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            <strong>Sommet:</strong> S(${fmt(alpha)}, ${fmt(beta)})
          </div>
          <div class="result">
            <i data-lucide="calculator" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            <strong>Discriminant:</strong> Δ = ${fmt(delta)}
          </div>
        `;
        
        if (delta > 0) {
          const x1 = (-b - Math.sqrt(delta)) / (2 * a);
          const x2 = (-b + Math.sqrt(delta)) / (2 * a);
          resultHTML += `
            <div class="result goodbox">
              <i data-lucide="git-branch" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              <strong>Racines:</strong> x₁ = ${fmt(x1)}, x₂ = ${fmt(x2)}
            </div>
          `;
        } else if (delta === 0) {
          resultHTML += `
            <div class="result">
              <i data-lucide="circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              <strong>Racine double:</strong> x₀ = ${fmt(alpha)}
            </div>
          `;
        } else {
          resultHTML += `
            <div class="result">
              <i data-lucide="x-circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              <strong>Pas de racine réelle</strong> (Δ < 0)
            </div>
          `;
        }
        
        output.innerHTML = resultHTML;
        lucide.createIcons();
        MathJax.typesetPromise?.();
      }

      // Quiz somme et produit
      function checkSP(num) {
        const sInput = $(`spS${num}`);
        const pInput = $(`spP${num}`);
        const result = $(`spR${num}`);
        
        const s = parseFloat(sInput.value);
        const p = parseFloat(pInput.value);
        
        let expectedS, expectedP;
        if (num === 1) {
          // f(x) = 2x² - 3x + 1, donc a=2, b=-3, c=1
          expectedS = -(-3)/2; // = 3/2 = 1.5
          expectedP = 1/2; // = 0.5
        } else {
          // f(x) = -3x² + 4x - 7, donc a=-3, b=4, c=-7
          expectedS = -4/(-3); // = 4/3 ≈ 1.333
          expectedP = (-7)/(-3); // = 7/3 ≈ 2.333
        }
        
        const sCorrect = Math.abs(s - expectedS) < 0.01;
        const pCorrect = Math.abs(p - expectedP) < 0.01;
        
        if (sCorrect && pCorrect) {
          result.innerHTML = `<span style="color: var(--good);"><i data-lucide="check-circle" style="width: 16px; height: 16px;"></i> Correct !</span>`;
        } else {
          result.innerHTML = `<span style="color: var(--bad);"><i data-lucide="x-circle" style="width: 16px; height: 16px;"></i> S = ${fmt(expectedS)}, P = ${fmt(expectedP)}</span>`;
        }
        lucide.createIcons();
      }

      // Position relative parabole/droite
      function relPos() {
        const a = parseFloat($('pa').value);
        const b = parseFloat($('pb').value);
        const c = parseFloat($('pc').value);
        const m = parseFloat($('pm').value);
        const p = parseFloat($('pp').value);
        const output = $('relOut');
        
        if (!isFinite(a) || a === 0 || !isFinite(b) || !isFinite(c) || !isFinite(m) || !isFinite(p)) {
          output.innerHTML = `
            <h3><i data-lucide="alert-triangle" class="icone-orange" style="width: 20px; height: 20px;"></i> Erreur</h3>
            <div class="result badbox">
              <i data-lucide="x-circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              Paramètres invalides.
            </div>
          `;
          lucide.createIcons();
          return;
        }
        
        // h(x) = f(x) - g(x) = ax² + (b-m)x + (c-p)
        const A = a;
        const B = b - m;
        const C = c - p;
        const delta = B * B - 4 * A * C;
        
        let resultHTML = `
          <h3><i data-lucide="bar-chart-3" class="icone-verte" style="width: 20px; height: 20px;"></i> Résultats</h3>
          <div class="result">
            <i data-lucide="function-square" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            <strong>h(x) = f(x) - g(x) =</strong> ${fmt(A)}x² + ${fmt(B)}x + ${fmt(C)}
          </div>
          <div class="result">
            <i data-lucide="calculator" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            <strong>Discriminant:</strong> Δ = ${fmt(delta)}
          </div>
        `;
        
        if (delta > 0) {
          const x1 = (-B - Math.sqrt(delta)) / (2 * A);
          const x2 = (-B + Math.sqrt(delta)) / (2 * A);
          resultHTML += `
            <div class="result goodbox">
              <i data-lucide="intersect" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              <strong>2 points d'intersection:</strong> x = ${fmt(x1)} et x = ${fmt(x2)}
            </div>
          `;
        } else if (delta === 0) {
          const x0 = -B / (2 * A);
          resultHTML += `
            <div class="result">
              <i data-lucide="circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              <strong>1 point de tangence:</strong> x = ${fmt(x0)}
            </div>
          `;
        } else {
          resultHTML += `
            <div class="result">
              <i data-lucide="x-circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              <strong>Pas d'intersection</strong> (courbes disjointes)
            </div>
          `;
        }
        
        output.innerHTML = resultHTML;
        lucide.createIcons();
        MathJax.typesetPromise?.();
      }

      // Optimisation géométrique
      function opt() {
        const L = parseFloat($('Lclo').value);
        const t = parseFloat($('tclo').value);
        const output = $('optOut');
        
        if (!isFinite(L) || L <= 0 || !isFinite(t) || t < 0) {
          output.innerHTML = `
            <h3><i data-lucide="alert-triangle" class="icone-orange" style="width: 20px; height: 20px;"></i> Erreur</h3>
            <div class="result badbox">
              <i data-lucide="x-circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              L > 0 et t ≥ 0 requis.
            </div>
          `;
          lucide.createIcons();
          return;
        }
        
        // Contrainte: 2x + y = L - 2t (clôture sur 3 côtés)
        // Aire: A = x × y = x × (L - 2t - 2x)
        // A(x) = x(L - 2t - 2x) = (L - 2t)x - 2x²
        // Maximum en x = (L - 2t)/4
        
        const xOpt = (L - 2 * t) / 4;
        const yOpt = L - 2 * t - 2 * xOpt;
        const aireMax = xOpt * yOpt;
        
        if (xOpt <= 0 || yOpt <= 0) {
          output.innerHTML = `
            <h3><i data-lucide="alert-triangle" class="icone-orange" style="width: 20px; height: 20px;"></i> Impossible</h3>
            <div class="result badbox">
              <i data-lucide="x-circle" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              Paramètres incompatibles (dimensions négatives).
            </div>
          `;
          lucide.createIcons();
          return;
        }
        
        const resultHTML = `
          <h3><i data-lucide="target" class="icone-orange" style="width: 20px; height: 20px;"></i> Optimisation</h3>
          <div class="result goodbox">
            <i data-lucide="maximize" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            <strong>Dimensions optimales:</strong><br/>
            x = ${fmt(xOpt)} m, y = ${fmt(yOpt)} m
          </div>
          <div class="result goodbox">
            <i data-lucide="square" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            <strong>Aire maximale:</strong> ${fmt(aireMax)} m²
          </div>
        `;
        
        output.innerHTML = resultHTML;
        lucide.createIcons();
        MathJax.typesetPromise?.();
      }

      // Event listeners
      document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
        
        // Boutons principaux
        $('themeBtn')?.addEventListener('click', toggleTheme);
        $('togglePlanBtn')?.addEventListener('click', togglePlan);
        $('btnCalc')?.addEventListener('click', calc);
        $('btnSP1')?.addEventListener('click', () => checkSP(1));
        $('btnSP2')?.addEventListener('click', () => checkSP(2));
        $('btnRel')?.addEventListener('click', relPos);
        $('btnOpt')?.addEventListener('click', opt);
        
        // Retypeset MathJax
        $('retypesetBtn')?.addEventListener('click', () => {
          MathJax.typesetPromise?.();
        });
        
        // Print
        $('printBtn')?.addEventListener('click', () => {
          window.print();
        });
        
        // Révélations (placeholder)
        $('revealBtn')?.addEventListener('click', () => {
          const btn = $('revealBtn');
          const pressed = btn.getAttribute('aria-pressed') === 'true';
          btn.setAttribute('aria-pressed', !pressed);
          // Logique pour révéler/masquer les solutions
        });
        
        // Navigation fluide
        document.querySelectorAll('a[href^="#"]').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const target = document.querySelector(link.getAttribute('href'));
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });
        });
      });
    </script>
  </body>
</html>
