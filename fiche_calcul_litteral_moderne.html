<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calcul littéral — Exercices + Méthodologie (EDS Première)</title>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    :root {
      /* Palette éducative */
      --bleu-confiance: #2563EB;
      --vert-reussite: #16A34A;
      --violet-creativite: #7C3AED;
      --orange-energie: #EA580C;
      --jaune-lumiere: #FCD34D;
      --rose-encouragement: #EC4899;
      
      /* Couleurs neutres */
      --gris-ardoise: #475569;
      --gris-clair: #94A3B8;
      --blanc-pur: #FFFFFF;
      --bleu-nuit: #0F172A;
      --gris-tres-clair: #F8FAFC;
      
      /* Gradients éducatifs */
      --gradient-apprentissage: linear-gradient(135deg, var(--bleu-confiance), var(--vert-reussite));
      --gradient-creativite: linear-gradient(135deg, var(--violet-creativite), var(--bleu-confiance));
      --gradient-energie: linear-gradient(135deg, var(--orange-energie), var(--jaune-lumiere));
      
      /* Ombres éducatives */
      --ombre-douce: 0 4px 6px -1px rgba(37, 99, 235, 0.1);
      --ombre-moyenne: 0 10px 15px -3px rgba(37, 99, 235, 0.1);
      --ombre-forte: 0 20px 25px -5px rgba(37, 99, 235, 0.15);
    }

    [data-theme="light"] {
      --bg: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
      --bg-card: rgba(255, 255, 255, 0.95);
      --bg-secondary: rgba(248, 250, 252, 0.8);
      --texte: var(--gris-ardoise);
      --texte-secondaire: var(--gris-clair);
      --bordure: rgba(226, 232, 240, 0.6);
      --bordure-forte: rgba(226, 232, 240, 1);
    }

    [data-theme="dark"] {
      --bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      --bg-card: rgba(30, 41, 59, 0.95);
      --bg-secondary: rgba(15, 23, 42, 0.8);
      --texte: #F1F5F9;
      --texte-secondaire: var(--gris-clair);
      --bordure: rgba(51, 65, 85, 0.6);
      --bordure-forte: rgba(51, 65, 85, 1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--texte);
      line-height: 1.6;
      transition: all 0.3s ease;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 26px 18px 90px;
    }

    /* Header modernisé */
    header {
      position: sticky;
      top: 0;
      background: var(--bg-card);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--bordure);
      z-index: 100;
      padding: 1rem 0;
      box-shadow: var(--ombre-douce);
      border-radius: 0 0 16px 16px;
      margin-bottom: 2rem;
    }

    .toolbar {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }

    .header-info {
      flex: 1;
    }

    .header-info h1 {
      font-size: clamp(1.4rem, 2.2vw + 0.8rem, 2.4rem);
      margin: 8px 0;
      background: var(--gradient-apprentissage);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      color: white;
      background: var(--gradient-energie);
      padding: 6px 12px;
      border-radius: 20px;
      margin-left: 12px;
      font-weight: 600;
    }

    .author-info {
      color: var(--texte-secondaire);
      font-size: 0.875rem;
      margin: 4px 0;
    }

    .course-description {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      background: var(--bg-secondary);
      padding: 10px 16px;
      border-radius: 25px;
      border: 1px solid var(--bordure);
      margin-top: 8px;
      font-size: 0.9rem;
    }

    .buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      background: var(--bg-card);
      border: 1px solid var(--bordure);
      color: var(--texte);
      padding: 10px 16px;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: var(--ombre-douce);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      font-size: 0.875rem;
      transition: all 0.2s ease;
      text-decoration: none;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--ombre-moyenne);
      border-color: var(--bleu-confiance);
    }

    .btn-primary {
      background: var(--gradient-apprentissage);
      color: white;
      border: none;
    }

    .btn-accent {
      background: var(--gradient-creativite);
      color: white;
      border: none;
    }

    /* Cards modernisées */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--bordure);
      border-radius: 20px;
      padding: 24px;
      box-shadow: var(--ombre-douce);
      margin-bottom: 24px;
      transition: all 0.3s ease;
    }

    .card:hover {
      box-shadow: var(--ombre-moyenne);
      transform: translateY(-2px);
    }

    /* Sommaire par difficulté */
    .difficulty-summary {
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), rgba(234, 88, 12, 0.05));
      border: 2px solid rgba(124, 58, 237, 0.2);
    }

    .difficulty-level {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 12px 0;
      padding: 12px 16px;
      background: var(--bg-secondary);
      border-radius: 12px;
      border-left: 4px solid var(--violet-creativite);
    }

    .stars {
      display: flex;
      gap: 2px;
    }

    .star {
      color: var(--jaune-lumiere);
    }

    .exercise-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-left: 8px;
    }

    .exercise-link {
      background: var(--gradient-apprentissage);
      color: white;
      padding: 4px 12px;
      border-radius: 16px;
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .exercise-link:hover {
      transform: scale(1.05);
      box-shadow: var(--ombre-douce);
    }

    /* Navigation et plan */
    .plan-card {
      background: var(--gradient-creativite);
      color: white;
      border: none;
    }

    .plan-card h2::before {
      background: white;
    }

    .plan-card ol {
      margin: 0 0 8px 24px;
      line-height: 1.8;
    }

    .plan-card a {
      color: rgba(255, 255, 255, 0.9);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .plan-card a:hover {
      color: white;
      text-decoration: underline;
    }

    /* Titres et sections */
    h1 {
      font-size: clamp(1.4rem, 2.2vw + 0.8rem, 2.4rem);
      margin: 8px 0;
    }

    h2 {
      font-size: 1.5rem;
      margin: 0.2rem 0 1rem;
      color: var(--texte);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    h2::before {
      content: '';
      width: 4px;
      height: 24px;
      background: var(--gradient-apprentissage);
      border-radius: 2px;
    }

    h3 {
      font-size: 1.2rem;
      margin: 0.2rem 0 0.8rem;
      color: var(--violet-creativite);
      font-weight: 600;
    }

    /* Exercices */
    .exercise-section {
      border-left: 4px solid var(--bleu-confiance);
      background: linear-gradient(90deg, transparent, rgba(37, 99, 235, 0.05));
      border-radius: 0 16px 16px 0;
    }

    .exercise-number {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--gradient-apprentissage);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 700;
      margin-bottom: 16px;
    }

    .step {
      display: flex;
      gap: 16px;
      align-items: flex-start;
      border-left: 4px solid var(--vert-reussite);
      padding: 16px 20px;
      margin: 16px 0;
      background: linear-gradient(90deg, transparent, rgba(22, 163, 74, 0.08));
      border-radius: 0 12px 12px 0;
    }

    .step .n {
      flex: 0 0 32px;
      height: 32px;
      display: grid;
      place-items: center;
      border-radius: 10px;
      background: var(--gradient-apprentissage);
      color: white;
      font-weight: 700;
      font-size: 0.875rem;
    }

    /* Details et accordéons */
    details {
      background: var(--bg-secondary);
      border: 1px solid var(--bordure);
      border-radius: 16px;
      padding: 16px 20px;
      margin: 16px 0;
      transition: all 0.3s ease;
    }

    details:hover {
      box-shadow: var(--ombre-douce);
    }

    details[open] {
      background: var(--bg-card);
      box-shadow: var(--ombre-douce);
    }

    summary {
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 0;
      color: var(--violet-creativite);
    }

    summary::before {
      content: '';
      width: 24px;
      height: 24px;
      background: var(--gradient-creativite);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: bold;
    }

    details[open] summary::before {
      background: var(--gradient-apprentissage);
    }

    /* Grilles et layouts */
    .grid {
      display: grid;
      gap: 24px;
    }

    .cols-2 {
      grid-template-columns: 1.1fr 0.9fr;
    }

    @media (max-width: 980px) {
      .cols-2 {
        grid-template-columns: 1fr;
      }
    }

    /* Dividers */
    .hr {
      height: 2px;
      background: var(--gradient-apprentissage);
      border-radius: 1px;
      margin: 20px 0;
      opacity: 0.3;
    }

    /* Footer flottant */
    .sticky-footer {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 50;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 16px 12px 60px;
      }
      
      .toolbar {
        flex-direction: column;
        align-items: stretch;
        gap: 16px;
      }
      
      .buttons {
        justify-content: center;
      }
      
      .step {
        padding: 12px 16px;
      }
    }

    /* Animations */
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-in {
      animation: slideInUp 0.6s ease-out;
    }

    /* Print styles */
    @media print {
      .buttons, .sticky-footer {
        display: none !important;
      }
      .grid.cols-2 {
        grid-template-columns: 1fr !important;
      }
      details {
        display: block;
      }
      details > summary {
        display: none;
      }
      details > * {
        display: block;
      }
    }

    /* Couleurs des icônes */
    .icone-bleue { color: var(--bleu-confiance); }
    .icone-verte { color: var(--vert-reussite); }
    .icone-violette { color: var(--violet-creativite); }
    .icone-orange { color: var(--orange-energie); }
    .icone-jaune { color: var(--jaune-lumiere); }
    .icone-rose { color: var(--rose-encouragement); }
  </style>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]],
        displayMath: [["$$", "$$"], ["\\[", "\\]"]],
        macros: {
          N: "\\mathbb{N}",
          Z: "\\mathbb{Z}",
          Q: "\\mathbb{Q}",
          R: "\\mathbb{R}"
        }
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body data-theme="light">
  <div class="container">
    <header>
      <div class="toolbar">
        <div class="header-info">
          <h1>
            <i data-lucide="calculator" class="icone-violette" style="width: 32px; height: 32px; margin-right: 8px;"></i>
            Calcul littéral — Exercices + Méthodologie
            <span class="badge">
              <i data-lucide="refresh-cw" style="width: 16px; height: 16px;"></i>
              Rappels de seconde
            </span>
          </h1>
          <div class="author-info">
            <i data-lucide="user" class="icone-bleue" style="width: 16px; height: 16px;"></i>
            <strong>Alaeddine Ben Rhouma</strong> — Lycée Pierre Mendès France, Tunis • © 2025
          </div>
          <div class="course-description">
            <i data-lucide="info" class="icone-orange" style="width: 20px; height: 20px;"></i>
            <span>Fiche de rappels strictement au programme de Seconde (aucune notion de Première)</span>
          </div>
        </div>
        <div class="buttons">
          <button class="btn" id="themeBtn">
            <i data-lucide="moon" id="theme-icon" style="width: 18px; height: 18px;"></i>
            <span>Thème</span>
          </button>
          <button class="btn" id="retypesetBtn">
            <i data-lucide="refresh-cw" style="width: 18px; height: 18px;"></i>
            <span>LaTeX</span>
          </button>
          <button class="btn" id="printBtn">
            <i data-lucide="printer" style="width: 18px; height: 18px;"></i>
            <span>Imprimer</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Sommaire par difficulté -->
    <section class="card difficulty-summary animate-in">
      <h2>
        <i data-lucide="layers" class="icone-violette" style="width: 28px; height: 28px;"></i>
        Sommaire par difficulté
      </h2>
      
      <div class="difficulty-level">
        <div class="stars">
          <i data-lucide="star" class="star" style="width: 20px; height: 20px;"></i>
        </div>
        <span><strong>Niveau débutant :</strong></span>
        <div class="exercise-links">
          <a href="#ex1" class="exercise-link">Ex 1 — Développer & réduire</a>
          <a href="#ex4" class="exercise-link">Ex 4 — Carrés</a>
        </div>
      </div>
      
      <div class="difficulty-level">
        <div class="stars">
          <i data-lucide="star" class="star" style="width: 20px; height: 20px;"></i>
          <i data-lucide="star" class="star" style="width: 20px; height: 20px;"></i>
        </div>
        <span><strong>Niveau intermédiaire :</strong></span>
        <div class="exercise-links">
          <a href="#ex2" class="exercise-link">Ex 2 — Factoriser</a>
          <a href="#ex3" class="exercise-link">Ex 3 — Équations-produit</a>
          <a href="#ex5" class="exercise-link">Ex 5 — Équations — divers</a>
          <a href="#ex8" class="exercise-link">Ex 8 — Inéquations (produits/polynômes)</a>
          <a href="#ex9" class="exercise-link">Ex 9 — Inéquations (quotients)</a>
          <a href="#ex10" class="exercise-link">Ex 10 — Domaines</a>
        </div>
      </div>
      
      <div class="difficulty-level">
        <div class="stars">
          <i data-lucide="star" class="star" style="width: 20px; height: 20px;"></i>
          <i data-lucide="star" class="star" style="width: 20px; height: 20px;"></i>
          <i data-lucide="star" class="star" style="width: 20px; height: 20px;"></i>
        </div>
        <span><strong>Niveau avancé :</strong></span>
        <div class="exercise-links">
          <a href="#ex6" class="exercise-link">Ex 6 — Équations avec fractions</a>
          <a href="#ex7" class="exercise-link">Ex 7 — Équations supplémentaires</a>
        </div>
      </div>
    </section>

    <!-- Navigation et plan -->
    <section class="grid cols-2">
      <nav class="card plan-card animate-in">
        <h2>
          <i data-lucide="map" style="width: 28px; height: 28px; color: white;"></i>
          Plan de la fiche
        </h2>
        <div class="hr" style="background: rgba(255, 255, 255, 0.3);"></div>
        <ol>
          <li><a href="#dev">Développer & réduire</a></li>
          <li><a href="#facto">Factoriser</a></li>
          <li><a href="#equations">Équations (dont produit)</a></li>
          <li><a href="#inequations">Inéquations</a></li>
          <li><a href="#domaine">Domaine de définition</a></li>
          <li><a href="#methodo">Fiche méthodologie</a></li>
        </ol>
        <p style="color: rgba(255, 255, 255, 0.8); margin-top: 16px;">
          <i data-lucide="info" style="width: 16px; height: 16px; margin-right: 8px;"></i>
          Corrections détaillées repliées — dépliez au besoin.
        </p>
      </nav>

      <!-- Section Développer & réduire -->
      <div class="card exercise-section animate-in" id="dev">
        <h2>
          <i data-lucide="expand" class="icone-bleue" style="width: 28px; height: 28px;"></i>
          Développer & réduire
        </h2>
        
        <div class="exercise-number" id="ex1">
          <i data-lucide="play-circle" style="width: 20px; height: 20px;"></i>
          <span>Exercice 1</span>
        </div>
        
        <details open>
          <summary>
            <i data-lucide="list" style="width: 20px; height: 20px;"></i>
            <strong>Série — Développement (sélection)</strong>
          </summary>
          
          <div class="step">
            <div class="n">1</div>
            <div>
              <i data-lucide="edit" class="icone-bleue" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              $ (3x-1)(2x+4) - (x+2)(4x-5) $
              <details style="margin-top: 12px;">
                <summary>
                  <i data-lucide="check-circle" style="width: 18px; height: 18px;"></i>
                  <strong>Correction</strong>
                </summary>
                <div style="padding: 12px 0;">
                  $ (3x-1)(2x+4)=6x^2+12x-2x-4=6x^2+10x-4 $.<br/>
                  $ (x+2)(4x-5)=4x^2-5x+8x-10=4x^2+3x-10 $.<br/>
                  Différence: $(6x^2+10x-4)-(4x^2+3x-10)=2x^2+7x+6$.
                </div>
              </details>
            </div>
          </div>
          
          <div class="step">
            <div class="n">2</div>
            <div>
              <i data-lucide="edit" class="icone-bleue" style="width: 20px; height: 20px; margin-right: 8px;"></i>
              $ (7x+3)^2 - (3x-2)^2 $
              <details style="margin-top: 12px;">
                <summary>
                  <i data-lucide="check-circle" style="width: 18px; height: 18px;"></i>
                  <strong>Correction</strong>
                </summary>
                <div style="padding: 12px 0;">
                  $(7x+3)^2 = 49x^2 + 42x + 9$<br/>
                  $(3x-2)^2 = 9x^2 - 12x + 4$<br/>
                  Différence: $(49x^2 + 42x + 9) - (9x^2 - 12x + 4) = 40x^2 + 54x + 5$
                </div>
              </details>
            </div>
          </div>
        </details>
      </div>
    </section>

    <!-- Section Factoriser -->
    <section class="card exercise-section animate-in" id="facto">
      <h2>
        <i data-lucide="git-branch" class="icone-verte" style="width: 28px; height: 28px;"></i>
        Factoriser
      </h2>
      
      <div class="exercise-number" id="ex2">
        <i data-lucide="play-circle" style="width: 20px; height: 20px;"></i>
        <span>Exercice 2</span>
      </div>
      
      <details>
        <summary>
          <i data-lucide="scissors" style="width: 20px; height: 20px;"></i>
          <strong>Série — Factorisation</strong>
        </summary>
        
        <div class="step">
          <div class="n">1</div>
          <div>
            <i data-lucide="target" class="icone-verte" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            Factoriser $12x^2 - 8x$
            <details style="margin-top: 12px;">
              <summary>
                <i data-lucide="check-circle" style="width: 18px; height: 18px;"></i>
                <strong>Correction</strong>
              </summary>
              <div style="padding: 12px 0;">
                Facteur commun: $4x$<br/>
                $12x^2 - 8x = 4x(3x - 2)$
              </div>
            </details>
          </div>
        </div>
        
        <div class="step">
          <div class="n">2</div>
          <div>
            <i data-lucide="target" class="icone-verte" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            Factoriser $x^2 - 9$ (identité remarquable)
            <details style="margin-top: 12px;">
              <summary>
                <i data-lucide="check-circle" style="width: 18px; height: 18px;"></i>
                <strong>Correction</strong>
              </summary>
              <div style="padding: 12px 0;">
                Différence de carrés: $a^2 - b^2 = (a-b)(a+b)$<br/>
                $x^2 - 9 = x^2 - 3^2 = (x-3)(x+3)$
              </div>
            </details>
          </div>
        </div>
      </details>
    </section>

    <!-- Section Équations -->
    <section class="card exercise-section animate-in" id="equations">
      <h2>
        <i data-lucide="equal" class="icone-violette" style="width: 28px; height: 28px;"></i>
        Équations (dont produit)
      </h2>
      
      <div class="exercise-number" id="ex3">
        <i data-lucide="play-circle" style="width: 20px; height: 20px;"></i>
        <span>Exercice 3</span>
      </div>
      
      <details>
        <summary>
          <i data-lucide="zap" style="width: 20px; height: 20px;"></i>
          <strong>Équations-produit</strong>
        </summary>
        
        <div class="step">
          <div class="n">1</div>
          <div>
            <i data-lucide="calculator" class="icone-violette" style="width: 20px; height: 20px; margin-right: 8px;"></i>
            Résoudre $(2x-3)(x+1) = 0$
            <details style="margin-top: 12px;">
              <summary>
                <i data-lucide="check-circle" style="width: 18px; height: 18px;"></i>
                <strong>Correction</strong>
              </summary>
              <div style="padding: 12px 0;">
                Un produit est nul si et seulement si l'un de ses facteurs est nul.<br/>
                $2x - 3 = 0$ ou $x + 1 = 0$<br/>
                $x = \frac{3}{2}$ ou $x = -1$<br/>
                Solutions: $S = \{-1; \frac{3}{2}\}$
              </div>
            </details>
          </div>
        </div>
      </details>
    </section>

    <!-- Section Méthodologie -->
    <section class="card animate-in" id="methodo" style="background: linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(37, 99, 235, 0.05)); border: 2px solid rgba(22, 163, 74, 0.2);">
      <h2>
        <i data-lucide="compass" class="icone-verte" style="width: 28px; height: 28px;"></i>
        Fiche méthodologie
      </h2>
      
      <div class="grid cols-2">
        <div>
          <h3>
            <i data-lucide="lightbulb" class="icone-jaune" style="width: 24px; height: 24px;"></i>
            Conseils généraux
          </h3>
          <ul style="margin-left: 20px; line-height: 1.8;">
            <li><strong>Développer :</strong> Distribuer chaque terme du premier facteur avec chaque terme du second</li>
            <li><strong>Factoriser :</strong> Chercher d'abord un facteur commun, puis les identités remarquables</li>
            <li><strong>Équations :</strong> Isoler l'inconnue en effectuant les mêmes opérations des deux côtés</li>
          </ul>
        </div>
        
        <div>
          <h3>
            <i data-lucide="bookmark" class="icone-violette" style="width: 24px; height: 24px;"></i>
            Identités remarquables
          </h3>
          <div style="background: var(--bg-secondary); padding: 16px; border-radius: 12px; margin-top: 12px;">
            <p><strong>$(a+b)^2 = a^2 + 2ab + b^2$</strong></p>
            <p><strong>$(a-b)^2 = a^2 - 2ab + b^2$</strong></p>
            <p><strong>$(a+b)(a-b) = a^2 - b^2$</strong></p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Footer flottant -->
  <div class="sticky-footer">
    <button class="btn btn-primary" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
      <i data-lucide="arrow-up" style="width: 18px; height: 18px;"></i>
      <span>Haut</span>
    </button>
  </div>

  <script>
    // Initialiser les icônes Lucide
    lucide.createIcons();

    // Gestion du thème
    function toggleTheme() {
      const body = document.body;
      const currentTheme = body.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      const themeIcon = document.getElementById('theme-icon');
      
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme-educatif', newTheme);
      
      // Changer l'icône
      themeIcon.setAttribute('data-lucide', newTheme === 'dark' ? 'sun' : 'moon');
      lucide.createIcons();
    }

    // Chargement du thème sauvegardé
    const savedTheme = localStorage.getItem('theme-educatif') || 'light';
    document.body.setAttribute('data-theme', savedTheme);
    document.getElementById('theme-icon').setAttribute('data-lucide', savedTheme === 'dark' ? 'sun' : 'moon');

    // Event listeners
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
      
      // Boutons
      document.getElementById('themeBtn')?.addEventListener('click', toggleTheme);
      
      // Retypeset MathJax
      document.getElementById('retypesetBtn')?.addEventListener('click', () => {
        MathJax.typesetPromise?.();
      });
      
      // Print
      document.getElementById('printBtn')?.addEventListener('click', () => {
        window.print();
      });
      
      // Animation d'entrée progressive
      const cards = document.querySelectorAll('.animate-in');
      cards.forEach((card, index) => {
        setTimeout(() => {
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, index * 200);
      });
      
      // Navigation fluide
      document.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const target = document.querySelector(link.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    });
  </script>
</body>
</html>
